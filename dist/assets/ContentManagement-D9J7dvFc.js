import{j as e,at as s,p as i,au as a,a9 as t,F as l,ar as r,as as n,av as c,l as d,w as o,_ as u,f as x,a8 as h,aw as j,X as m,ax as v}from"./ui-vendor-BwAhdcts.js";import{r as p}from"./router-vendor-xnFU-SGQ.js";import{e as g,C as y,b as f,c as _,a as N,B as b}from"./index-CImf8UwA.js";import{B as w}from"./badge-Def1q0WS.js";import{I as C}from"./input-B1kw1Jk2.js";import{S,a as q,b as T,c as k,d as F}from"./select-DdYKYt_5.js";import{T as P,a as L,b as D,c as E}from"./tabs-2oAGv6oB.js";import{T as A,a as B,b as O,c as z,d as I,e as Q}from"./table-DUY_Eslo.js";import{D as M,d as V,a as K,b as R,c as U}from"./dialog-BRvuyna5.js";import{L as H}from"./label-BTUyfD56.js";import{T as J}from"./textarea-DC0W3P3Y.js";import{A as W}from"./AdminNavigation-FwahpWK3.js";import{a as X}from"./adminService-BGlCEodP.js";import"./react-vendor-DEQ385Nk.js";import"./supabase-vendor-Bj79fh9f.js";import"./index-jVOyRz7F.js";import"./index-LkZ9e_wI.js";const Y=()=>{const[m,v]=p.useState("questions"),[H,J]=p.useState(""),[Y,G]=p.useState("all"),[ee,se]=p.useState("all"),[ie,ae]=p.useState([]),[te,le]=p.useState([]),[re,ne]=p.useState(!1),[ce,de]=p.useState(!1),[oe,ue]=p.useState(null),[xe,he]=p.useState(null),{toast:je}=g();p.useEffect(()=>{me(),ve()},[]);const me=async()=>{try{const e=await X.getQuestions();ae(e.questions||[])}catch(e){je({title:"Error",description:"Failed to load questions",variant:"destructive"})}},ve=async()=>{try{const e=await X.getTryoutPackages();le(e.packages||[])}catch(e){je({title:"Error",description:"Failed to load tryout packages",variant:"destructive"})}},pe=async e=>{try{await X.createQuestion(e),je({title:"Success",description:"Question created successfully"}),ne(!1),me()}catch(s){je({title:"Error",description:"Failed to create question",variant:"destructive"})}},ge=async e=>{try{await X.createTryoutPackage(e),je({title:"Success",description:"Tryout package created successfully"}),de(!1),ve()}catch(s){je({title:"Error",description:"Failed to create tryout package",variant:"destructive"})}},ye=ie.filter(e=>{const s=e.question_text.toLowerCase().includes(H.toLowerCase())||e.subject.toLowerCase().includes(H.toLowerCase()),i="all"===Y||e.review_status===Y,a="all"===ee||e.subject===ee;return s&&i&&a}),fe=te.filter(e=>{const s=e.title.toLowerCase().includes(H.toLowerCase())||(e.description||"").toLowerCase().includes(H.toLowerCase()),i="all"===Y||(e.is_active?"active":"inactive")===Y;return s&&i}),_e=e=>{switch(e){case"approved":case"active":return"bg-green-100 text-green-800";case"draft":case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Ne=e=>{switch(null==e?void 0:e.toLowerCase()){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},be=e=>{switch(null==e?void 0:e.toLowerCase()){case"tps":return"bg-blue-100 text-blue-800";case"literasi":return"bg-green-100 text-green-800";case"matematika":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-primary/5 to-accent/5",children:[e.jsx(W,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-24 md:pt-20",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Content Management ðŸ“š"}),e.jsx("p",{className:"text-muted-foreground",children:"Kelola semua konten pembelajaran, soal, dan try out"})]}),e.jsxs(y,{className:"mb-6",children:[e.jsx(f,{children:e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(s,{className:"h-5 w-5"}),"Filter & Pencarian"]})}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(C,{placeholder:"Cari konten...",value:H,onChange:e=>J(e.target.value),className:"pl-10"})]}),e.jsxs(S,{value:Y,onValueChange:G,children:[e.jsx(q,{children:e.jsx(T,{placeholder:"Status"})}),e.jsxs(k,{children:[e.jsx(F,{value:"all",children:"Semua Status"}),e.jsx(F,{value:"approved",children:"Approved"}),e.jsx(F,{value:"draft",children:"Draft"}),e.jsx(F,{value:"pending",children:"Pending"}),e.jsx(F,{value:"active",children:"Active"}),e.jsx(F,{value:"inactive",children:"Inactive"}),e.jsx(F,{value:"rejected",children:"Rejected"})]})]}),e.jsxs(S,{value:ee,onValueChange:se,children:[e.jsx(q,{children:e.jsx(T,{placeholder:"Subject"})}),e.jsxs(k,{children:[e.jsx(F,{value:"all",children:"Semua Subject"}),e.jsx(F,{value:"tps",children:"TPS"}),e.jsx(F,{value:"literasi",children:"Literasi"}),e.jsx(F,{value:"matematika",children:"Matematika"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(a,{className:"h-4 w-4 mr-1"}),"Import"]}),e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(t,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})})]}),e.jsxs(P,{value:m,onValueChange:v,children:[e.jsxs(L,{className:"grid w-full grid-cols-2",children:[e.jsx(D,{value:"questions",children:"Soal"}),e.jsx(D,{value:"tryouts",children:"Try Out Packages"})]}),e.jsx(E,{value:"questions",className:"mt-6",children:e.jsxs(y,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-5 w-5"}),"Manajemen Soal"]}),e.jsxs(M,{open:re,onOpenChange:ne,children:[e.jsx(V,{asChild:!0,children:e.jsxs(b,{children:[e.jsx(r,{className:"h-4 w-4 mr-1"}),"Tambah Soal"]})}),e.jsxs(K,{className:"max-w-2xl",children:[e.jsx(R,{children:e.jsx(U,{children:"Tambah Soal Baru"})}),e.jsx(Z,{onSubmit:pe,onCancel:()=>ne(!1)})]})]})]})}),e.jsx(N,{children:e.jsxs(A,{children:[e.jsx(B,{children:e.jsxs(O,{children:[e.jsx(z,{children:"Pertanyaan"}),e.jsx(z,{children:"Subject"}),e.jsx(z,{children:"Sub Topic"}),e.jsx(z,{children:"Difficulty"}),e.jsx(z,{children:"Type"}),e.jsx(z,{children:"Status"}),e.jsx(z,{children:"Created"}),e.jsx(z,{children:"Aksi"})]})}),e.jsx(I,{children:ye.map(s=>e.jsxs(O,{children:[e.jsx(Q,{className:"font-medium max-w-xs truncate",children:s.question_text}),e.jsx(Q,{children:e.jsx(w,{className:be(s.subject),children:s.subject})}),e.jsx(Q,{children:s.sub_topic||"-"}),e.jsx(Q,{children:e.jsx(w,{className:Ne(s.difficulty_level),children:s.difficulty_level})}),e.jsx(Q,{children:s.question_type}),e.jsx(Q,{children:e.jsx(w,{className:_e(s.review_status),children:s.review_status})}),e.jsx(Q,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(Q,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>ue(s),children:e.jsx(n,{className:"h-4 w-4"})}),e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this question?"))try{await X.deleteQuestion(e),je({title:"Success",description:"Question deleted successfully"}),me()}catch(s){je({title:"Error",description:"Failed to delete question",variant:"destructive"})}})(s.id),children:e.jsx(c,{className:"h-4 w-4"})})]})})]},s.id))})]})})]})}),e.jsx(E,{value:"tryouts",className:"mt-6",children:e.jsxs(y,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-5 w-5"}),"Manajemen Tryout Packages"]}),e.jsxs(M,{open:ce,onOpenChange:de,children:[e.jsx(V,{asChild:!0,children:e.jsxs(b,{children:[e.jsx(r,{className:"h-4 w-4 mr-1"}),"Tambah Package"]})}),e.jsxs(K,{className:"max-w-2xl",children:[e.jsx(R,{children:e.jsx(U,{children:"Tambah Tryout Package Baru"})}),e.jsx($,{onSubmit:ge,onCancel:()=>de(!1)})]})]})]})}),e.jsx(N,{children:e.jsxs(A,{children:[e.jsx(B,{children:e.jsxs(O,{children:[e.jsx(z,{children:"Title"}),e.jsx(z,{children:"Category"}),e.jsx(z,{children:"Difficulty"}),e.jsx(z,{children:"Questions"}),e.jsx(z,{children:"Duration"}),e.jsx(z,{children:"Price"}),e.jsx(z,{children:"Status"}),e.jsx(z,{children:"Created"}),e.jsx(z,{children:"Aksi"})]})}),e.jsx(I,{children:fe.map(s=>e.jsxs(O,{children:[e.jsx(Q,{className:"font-medium",children:s.title}),e.jsx(Q,{children:e.jsx(w,{className:"bg-blue-100 text-blue-800",children:s.category})}),e.jsx(Q,{children:e.jsx(w,{className:Ne(s.difficulty_level),children:s.difficulty_level})}),e.jsx(Q,{children:s.total_questions}),e.jsxs(Q,{children:[s.duration_minutes," min"]}),e.jsxs(Q,{children:["Rp ",s.price.toLocaleString()]}),e.jsx(Q,{children:e.jsx(w,{className:_e(s.is_active?"active":"inactive"),children:s.is_active?"Active":"Inactive"})}),e.jsx(Q,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(Q,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>he(s),children:e.jsx(n,{className:"h-4 w-4"})}),e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this tryout package?"))try{await X.deleteTryoutPackage(e),je({title:"Success",description:"Tryout package deleted successfully"}),ve()}catch(s){je({title:"Error",description:"Failed to delete tryout package",variant:"destructive"})}})(s.id),children:e.jsx(c,{className:"h-4 w-4"})})]})})]},s.id))})]})})]})}),e.jsx(E,{value:"tryouts",className:"mt-6",children:e.jsxs(y,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-5 w-5"}),"Manajemen Try Out"]}),e.jsxs(b,{children:[e.jsx(r,{className:"h-4 w-4 mr-1"}),"Buat Try Out"]})]})}),e.jsx(N,{children:e.jsxs(A,{children:[e.jsx(B,{children:e.jsxs(O,{children:[e.jsx(z,{children:"Judul"}),e.jsx(z,{children:"Durasi"}),e.jsx(z,{children:"Soal"}),e.jsx(z,{children:"Status"}),e.jsx(z,{children:"Jadwal"}),e.jsx(z,{children:"Peserta"}),e.jsx(z,{children:"Aksi"})]})}),e.jsx(I,{children:fe.map(s=>e.jsxs(O,{children:[e.jsx(Q,{className:"font-medium",children:s.title}),e.jsx(Q,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{className:"h-4 w-4"}),s.duration_minutes," menit"]})}),e.jsxs(Q,{children:[s.total_questions," soal"]}),e.jsx(Q,{children:e.jsx(w,{className:_e(s.is_active?"active":"inactive"),children:s.is_active?"Active":"Inactive"})}),e.jsx(Q,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(u,{className:"h-4 w-4"}),new Date(s.created_at).toLocaleDateString()]})}),e.jsx(Q,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(x,{className:"h-4 w-4"}),"Rp ",s.price.toLocaleString()]})}),e.jsx(Q,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(b,{variant:"ghost",size:"sm",children:e.jsx(h,{className:"h-4 w-4"})}),e.jsx(b,{variant:"ghost",size:"sm",children:e.jsx(n,{className:"h-4 w-4"})}),e.jsx(b,{variant:"ghost",size:"sm",children:e.jsx(j,{className:"h-4 w-4"})})]})})]},s.id))})]})})]})})]}),e.jsx(M,{open:re,onOpenChange:ne,children:e.jsxs(K,{className:"max-w-2xl",children:[e.jsx(R,{children:e.jsx(U,{children:oe?"Edit Soal":"Tambah Soal Baru"})}),e.jsx(Z,{question:oe,onSubmit:oe?e=>(async(e,s)=>{try{await X.updateQuestion(e,s),je({title:"Success",description:"Question updated successfully"}),ue(null),me()}catch(i){je({title:"Error",description:"Failed to update question",variant:"destructive"})}})(oe.id,e):pe,onCancel:()=>{ne(!1),ue(null)}})]})}),e.jsx(M,{open:ce,onOpenChange:de,children:e.jsxs(K,{className:"max-w-2xl",children:[e.jsx(R,{children:e.jsx(U,{children:xe?"Edit Tryout Package":"Tambah Tryout Package Baru"})}),e.jsx($,{tryoutPackage:xe,onSubmit:xe?e=>(async(e,s)=>{try{await X.updateTryoutPackage(e,s),je({title:"Success",description:"Tryout package updated successfully"}),he(null),ve()}catch(i){je({title:"Error",description:"Failed to update tryout package",variant:"destructive"})}})(xe.id,e):ge,onCancel:()=>{de(!1),he(null)}})]})})]})]})};function Z({question:s,onSubmit:i,onCancel:a}){const[t,l]=p.useState({question_text:(null==s?void 0:s.question_text)||"",subject:(null==s?void 0:s.subject)||"TPS",sub_topic:(null==s?void 0:s.sub_topic)||"",difficulty_level:(null==s?void 0:s.difficulty_level)||"easy",question_type:(null==s?void 0:s.question_type)||"multiple_choice",options:(null==s?void 0:s.options)||["","","","",""],correct_answer:(null==s?void 0:s.correct_answer)||"",explanation:(null==s?void 0:s.explanation)||"",time_limit_seconds:(null==s?void 0:s.time_limit_seconds)||120});return e.jsxs("form",{onSubmit:e=>{e.preventDefault(),i(t)},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(H,{htmlFor:"question_text",children:"Pertanyaan"}),e.jsx(J,{id:"question_text",value:t.question_text,onChange:e=>l({...t,question_text:e.target.value}),required:!0,rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(H,{htmlFor:"subject",children:"Subject"}),e.jsxs(S,{value:t.subject,onValueChange:e=>l({...t,subject:e}),children:[e.jsx(q,{children:e.jsx(T,{})}),e.jsxs(k,{children:[e.jsx(F,{value:"TPS",children:"TPS"}),e.jsx(F,{value:"Literasi",children:"Literasi"}),e.jsx(F,{value:"Numerasi",children:"Numerasi"})]})]})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"sub_topic",children:"Sub Topic"}),e.jsx(C,{id:"sub_topic",value:t.sub_topic,onChange:e=>l({...t,sub_topic:e.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(H,{htmlFor:"difficulty_level",children:"Difficulty"}),e.jsxs(S,{value:t.difficulty_level,onValueChange:e=>l({...t,difficulty_level:e}),children:[e.jsx(q,{children:e.jsx(T,{})}),e.jsxs(k,{children:[e.jsx(F,{value:"easy",children:"Easy"}),e.jsx(F,{value:"medium",children:"Medium"}),e.jsx(F,{value:"hard",children:"Hard"})]})]})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"question_type",children:"Type"}),e.jsxs(S,{value:t.question_type,onValueChange:e=>l({...t,question_type:e}),children:[e.jsx(q,{children:e.jsx(T,{})}),e.jsxs(k,{children:[e.jsx(F,{value:"multiple_choice",children:"Multiple Choice"}),e.jsx(F,{value:"essay",children:"Essay"})]})]})]})]}),"multiple_choice"===t.question_type&&e.jsxs("div",{children:[e.jsx(H,{children:"Options"}),e.jsx("div",{className:"space-y-2",children:t.options.map((s,i)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"w-6 text-sm font-medium",children:[String.fromCharCode(65+i),"."]}),e.jsx(C,{value:s,onChange:e=>((e,s)=>{const i=[...t.options];i[e]=s,l({...t,options:i})})(i,e.target.value),placeholder:`Option ${String.fromCharCode(65+i)}`})]},i))})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"correct_answer",children:"Correct Answer"}),e.jsx(C,{id:"correct_answer",value:t.correct_answer,onChange:e=>l({...t,correct_answer:e.target.value}),placeholder:"multiple_choice"===t.question_type?"A, B, C, D, or E":"Correct answer",required:!0})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"explanation",children:"Explanation"}),e.jsx(J,{id:"explanation",value:t.explanation,onChange:e=>l({...t,explanation:e.target.value}),rows:2})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"time_limit_seconds",children:"Time Limit (seconds)"}),e.jsx(C,{id:"time_limit_seconds",type:"number",value:t.time_limit_seconds,onChange:e=>l({...t,time_limit_seconds:parseInt(e.target.value)||120}),min:30,max:600})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(b,{type:"button",variant:"outline",onClick:a,children:[e.jsx(m,{className:"h-4 w-4 mr-1"}),"Cancel"]}),e.jsxs(b,{type:"submit",children:[e.jsx(v,{className:"h-4 w-4 mr-1"}),s?"Update":"Create"]})]})]})}function $({tryoutPackage:s,onSubmit:i,onCancel:a}){const[t,l]=p.useState({title:(null==s?void 0:s.title)||"",description:(null==s?void 0:s.description)||"",category:(null==s?void 0:s.category)||"SNBT",difficulty_level:(null==s?void 0:s.difficulty_level)||"medium",duration_minutes:(null==s?void 0:s.duration_minutes)||180,total_questions:(null==s?void 0:s.total_questions)||0,price:(null==s?void 0:s.price)||0,is_active:(null==s?void 0:s.is_active)??!0});return e.jsxs("form",{onSubmit:e=>{e.preventDefault(),i(t)},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(H,{htmlFor:"title",children:"Title"}),e.jsx(C,{id:"title",value:t.title,onChange:e=>l({...t,title:e.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"description",children:"Description"}),e.jsx(J,{id:"description",value:t.description,onChange:e=>l({...t,description:e.target.value}),rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(H,{htmlFor:"category",children:"Category"}),e.jsxs(S,{value:t.category,onValueChange:e=>l({...t,category:e}),children:[e.jsx(q,{children:e.jsx(T,{})}),e.jsxs(k,{children:[e.jsx(F,{value:"SNBT",children:"SNBT"}),e.jsx(F,{value:"UTBK",children:"UTBK"}),e.jsx(F,{value:"Simulasi",children:"Simulasi"})]})]})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"difficulty_level",children:"Difficulty"}),e.jsxs(S,{value:t.difficulty_level,onValueChange:e=>l({...t,difficulty_level:e}),children:[e.jsx(q,{children:e.jsx(T,{})}),e.jsxs(k,{children:[e.jsx(F,{value:"easy",children:"Easy"}),e.jsx(F,{value:"medium",children:"Medium"}),e.jsx(F,{value:"hard",children:"Hard"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(H,{htmlFor:"duration_minutes",children:"Duration (minutes)"}),e.jsx(C,{id:"duration_minutes",type:"number",value:t.duration_minutes,onChange:e=>l({...t,duration_minutes:parseInt(e.target.value)||180}),min:30,max:300,required:!0})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"total_questions",children:"Total Questions"}),e.jsx(C,{id:"total_questions",type:"number",value:t.total_questions,onChange:e=>l({...t,total_questions:parseInt(e.target.value)||0}),min:1,max:200,required:!0})]}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"price",children:"Price (Rp)"}),e.jsx(C,{id:"price",type:"number",value:t.price,onChange:e=>l({...t,price:parseInt(e.target.value)||0}),min:0,required:!0})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:t.is_active,onChange:e=>l({...t,is_active:e.target.checked}),className:"rounded"}),e.jsx(H,{htmlFor:"is_active",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(b,{type:"button",variant:"outline",onClick:a,children:[e.jsx(m,{className:"h-4 w-4 mr-1"}),"Cancel"]}),e.jsxs(b,{type:"submit",children:[e.jsx(v,{className:"h-4 w-4 mr-1"}),s?"Update":"Create"]})]})]})}export{Y as default};
//# sourceMappingURL=ContentManagement-D9J7dvFc.js.map
