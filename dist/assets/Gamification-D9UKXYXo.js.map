{"version":3,"file":"Gamification-D9UKXYXo.js","sources":["../../src/components/GameStats.tsx","../../src/components/RewardNotification.tsx","../../src/components/LevelUpAnimation.tsx","../../src/components/gamification/UserStats.tsx","../../node_modules/engine.io-parser/build/esm/commons.js","../../node_modules/engine.io-parser/build/esm/encodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","../../node_modules/engine.io-parser/build/esm/decodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/index.js","../../node_modules/@socket.io/component-emitter/lib/esm/index.js","../../node_modules/engine.io-client/build/esm/globals.js","../../node_modules/engine.io-client/build/esm/util.js","../../node_modules/engine.io-client/build/esm/transport.js","../../node_modules/engine.io-client/build/esm/contrib/parseqs.js","../../node_modules/engine.io-client/build/esm/transports/polling.js","../../node_modules/engine.io-client/build/esm/contrib/has-cors.js","../../node_modules/engine.io-client/build/esm/transports/polling-xhr.js","../../node_modules/engine.io-client/build/esm/transports/websocket.js","../../node_modules/engine.io-client/build/esm/transports/index.js","../../node_modules/engine.io-client/build/esm/transports/webtransport.js","../../node_modules/engine.io-client/build/esm/contrib/parseuri.js","../../node_modules/engine.io-client/build/esm/socket.js","../../node_modules/socket.io-parser/build/esm/is-binary.js","../../node_modules/socket.io-parser/build/esm/binary.js","../../node_modules/socket.io-parser/build/esm/index.js","../../node_modules/socket.io-client/build/esm/on.js","../../node_modules/socket.io-client/build/esm/socket.js","../../node_modules/socket.io-client/build/esm/contrib/backo2.js","../../node_modules/socket.io-client/build/esm/manager.js","../../node_modules/socket.io-client/build/esm/index.js","../../node_modules/socket.io-client/build/esm/url.js","../../src/hooks/useSocket.ts","../../src/pages/Gamification.tsx"],"sourcesContent":["import React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { Badge } from '@/components/ui/badge';\nimport { \n  Trophy, \n  Star, \n  Flame, \n  Target, \n  Clock, \n  BookOpen,\n  TrendingUp,\n  Award,\n  Zap,\n  Crown,\n  Medal,\n  Users,\n  Calendar,\n  BarChart3\n} from 'lucide-react';\nimport { motion } from 'framer-motion';\n\ninterface GameStatsProps {\n  className?: string;\n  showDetailed?: boolean;\n}\n\ninterface StatItem {\n  label: string;\n  value: string | number;\n  icon: React.ComponentType<any>;\n  color: string;\n  bgColor: string;\n  change?: string;\n  trend?: 'up' | 'down' | 'neutral';\n}\n\ninterface DetailedStat {\n  category: string;\n  stats: StatItem[];\n  icon: React.ComponentType<any>;\n  color: string;\n}\n\nconst GameStats: React.FC<GameStatsProps> = ({ className = '', showDetailed = false }) => {\n  const basicStats: StatItem[] = [\n    {\n      label: 'Level',\n      value: 12,\n      icon: Crown,\n      color: 'text-yellow-600',\n      bgColor: 'bg-yellow-100',\n      change: '+1',\n      trend: 'up'\n    },\n    {\n      label: 'Total XP',\n      value: '2,450',\n      icon: Star,\n      color: 'text-blue-600',\n      bgColor: 'bg-blue-100',\n      change: '+180',\n      trend: 'up'\n    },\n    {\n      label: 'Streak',\n      value: '7 hari',\n      icon: Flame,\n      color: 'text-orange-600',\n      bgColor: 'bg-orange-100',\n      change: '+1',\n      trend: 'up'\n    },\n    {\n      label: 'Coins',\n      value: '1,250',\n      icon: () => <div className=\"h-4 w-4 rounded-full bg-yellow-400\" />,\n      color: 'text-yellow-600',\n      bgColor: 'bg-yellow-100',\n      change: '+50',\n      trend: 'up'\n    }\n  ];\n\n  const detailedStats: DetailedStat[] = [\n    {\n      category: 'Learning Progress',\n      icon: BookOpen,\n      color: 'text-blue-600',\n      stats: [\n        {\n          label: 'Questions Answered',\n          value: '1,247',\n          icon: Target,\n          color: 'text-green-600',\n          bgColor: 'bg-green-100',\n          change: '+45 today',\n          trend: 'up'\n        },\n        {\n          label: 'Study Time',\n          value: '42h 30m',\n          icon: Clock,\n          color: 'text-purple-600',\n          bgColor: 'bg-purple-100',\n          change: '+2h today',\n          trend: 'up'\n        },\n        {\n          label: 'Accuracy Rate',\n          value: '78%',\n          icon: TrendingUp,\n          color: 'text-blue-600',\n          bgColor: 'bg-blue-100',\n          change: '+3%',\n          trend: 'up'\n        }\n      ]\n    },\n    {\n      category: 'Achievements',\n      icon: Trophy,\n      color: 'text-yellow-600',\n      stats: [\n        {\n          label: 'Total Achievements',\n          value: 23,\n          icon: Award,\n          color: 'text-yellow-600',\n          bgColor: 'bg-yellow-100',\n          change: '+2 this week',\n          trend: 'up'\n        },\n        {\n          label: 'Rare Achievements',\n          value: 5,\n          icon: Medal,\n          color: 'text-purple-600',\n          bgColor: 'bg-purple-100',\n          change: '+1 this week',\n          trend: 'up'\n        },\n        {\n          label: 'Completion Rate',\n          value: '67%',\n          icon: BarChart3,\n          color: 'text-green-600',\n          bgColor: 'bg-green-100',\n          change: '+5%',\n          trend: 'up'\n        }\n      ]\n    },\n    {\n      category: 'Social & Competition',\n      icon: Users,\n      color: 'text-pink-600',\n      stats: [\n        {\n          label: 'Leaderboard Rank',\n          value: '#15',\n          icon: Trophy,\n          color: 'text-orange-600',\n          bgColor: 'bg-orange-100',\n          change: '+3 positions',\n          trend: 'up'\n        },\n        {\n          label: 'Study Groups',\n          value: 3,\n          icon: Users,\n          color: 'text-blue-600',\n          bgColor: 'bg-blue-100',\n          change: '+1 this month',\n          trend: 'up'\n        },\n        {\n          label: 'Friends Helped',\n          value: 12,\n          icon: () => <div className=\"h-4 w-4 text-pink-600\">❤️</div>,\n          color: 'text-pink-600',\n          bgColor: 'bg-pink-100',\n          change: '+2 this week',\n          trend: 'up'\n        }\n      ]\n    },\n    {\n      category: 'Performance Metrics',\n      icon: Zap,\n      color: 'text-indigo-600',\n      stats: [\n        {\n          label: 'Best Streak',\n          value: '14 days',\n          icon: Flame,\n          color: 'text-orange-600',\n          bgColor: 'bg-orange-100',\n          change: 'Personal best',\n          trend: 'up'\n        },\n        {\n          label: 'Weekly Goal',\n          value: '85%',\n          icon: Target,\n          color: 'text-green-600',\n          bgColor: 'bg-green-100',\n          change: '17/20 days',\n          trend: 'up'\n        },\n        {\n          label: 'Monthly Active',\n          value: '28 days',\n          icon: Calendar,\n          color: 'text-blue-600',\n          bgColor: 'bg-blue-100',\n          change: '90% active',\n          trend: 'up'\n        }\n      ]\n    }\n  ];\n\n  const getTrendIcon = (trend?: string) => {\n    switch (trend) {\n      case 'up': return '↗️';\n      case 'down': return '↘️';\n      default: return '➡️';\n    }\n  };\n\n  const getTrendColor = (trend?: string) => {\n    switch (trend) {\n      case 'up': return 'text-green-600';\n      case 'down': return 'text-red-600';\n      default: return 'text-gray-600';\n    }\n  };\n\n  if (!showDetailed) {\n    return (\n      <Card className={className}>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Trophy className=\"h-5 w-5 text-yellow-500\" />\n            Game Stats\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-2 gap-4\">\n            {basicStats.map((stat, index) => {\n              const IconComponent = stat.icon;\n              return (\n                <motion.div\n                  key={stat.label}\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ delay: index * 0.1 }}\n                  className=\"text-center p-3 rounded-lg border bg-card\"\n                >\n                  <div className={`mx-auto mb-2 p-2 rounded-full w-fit ${stat.bgColor}`}>\n                    <IconComponent className={`h-4 w-4 ${stat.color}`} />\n                  </div>\n                  <p className=\"text-lg font-bold\">{stat.value}</p>\n                  <p className=\"text-xs text-muted-foreground\">{stat.label}</p>\n                  {stat.change && (\n                    <p className={`text-xs font-medium ${getTrendColor(stat.trend)}`}>\n                      {getTrendIcon(stat.trend)} {stat.change}\n                    </p>\n                  )}\n                </motion.div>\n              );\n            })}\n          </div>\n          \n          {/* Level Progress */}\n          <div className=\"mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg\">\n            <div className=\"flex justify-between items-center mb-2\">\n              <span className=\"text-sm font-medium\">Level 12 Progress</span>\n              <span className=\"text-sm text-muted-foreground\">2,450 / 2,800 XP</span>\n            </div>\n            <Progress value={87.5} className=\"h-3\" />\n            <p className=\"text-xs text-muted-foreground mt-1\">350 XP to Level 13</p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Overview Cards */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n        {basicStats.map((stat, index) => {\n          const IconComponent = stat.icon;\n          return (\n            <motion.div\n              key={stat.label}\n              initial={{ opacity: 0, scale: 0.9 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ delay: index * 0.1 }}\n            >\n              <Card className=\"text-center\">\n                <CardContent className=\"p-4\">\n                  <div className={`mx-auto mb-3 p-3 rounded-full w-fit ${stat.bgColor}`}>\n                    <IconComponent className={`h-6 w-6 ${stat.color}`} />\n                  </div>\n                  <p className=\"text-2xl font-bold mb-1\">{stat.value}</p>\n                  <p className=\"text-sm text-muted-foreground mb-2\">{stat.label}</p>\n                  {stat.change && (\n                    <Badge \n                      variant=\"secondary\" \n                      className={`text-xs ${getTrendColor(stat.trend)}`}\n                    >\n                      {getTrendIcon(stat.trend)} {stat.change}\n                    </Badge>\n                  )}\n                </CardContent>\n              </Card>\n            </motion.div>\n          );\n        })}\n      </div>\n\n      {/* Detailed Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {detailedStats.map((category, categoryIndex) => {\n          const CategoryIcon = category.icon;\n          return (\n            <motion.div\n              key={category.category}\n              initial={{ opacity: 0, y: 30 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: categoryIndex * 0.2 }}\n            >\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2 text-lg\">\n                    <CategoryIcon className={`h-5 w-5 ${category.color}`} />\n                    {category.category}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  {category.stats.map((stat, statIndex) => {\n                    const StatIcon = stat.icon;\n                    return (\n                      <motion.div\n                        key={stat.label}\n                        initial={{ opacity: 0, x: -20 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        transition={{ delay: (categoryIndex * 0.2) + (statIndex * 0.1) }}\n                        className=\"flex items-center justify-between p-3 rounded-lg bg-muted/30\"\n                      >\n                        <div className=\"flex items-center gap-3\">\n                          <div className={`p-2 rounded-lg ${stat.bgColor}`}>\n                            <StatIcon className={`h-4 w-4 ${stat.color}`} />\n                          </div>\n                          <div>\n                            <p className=\"font-medium text-sm\">{stat.label}</p>\n                            {stat.change && (\n                              <p className={`text-xs ${getTrendColor(stat.trend)}`}>\n                                {stat.change}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                        <div className=\"text-right\">\n                          <p className=\"font-bold text-lg\">{stat.value}</p>\n                        </div>\n                      </motion.div>\n                    );\n                  })}\n                </CardContent>\n              </Card>\n            </motion.div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default GameStats;","import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { \n  Trophy, \n  Star, \n  Gift, \n  Sparkles, \n  Crown, \n  Medal, \n  Award,\n  X,\n  Zap\n} from 'lucide-react';\n\ninterface Reward {\n  id: string;\n  type: 'achievement' | 'quest' | 'level_up' | 'streak' | 'special';\n  title: string;\n  description: string;\n  xp?: number;\n  coins?: number;\n  items?: string[];\n  rarity?: 'common' | 'uncommon' | 'rare' | 'epic' | 'legendary';\n  icon?: React.ComponentType<any>;\n}\n\ninterface RewardNotificationProps {\n  rewards: Reward[];\n  onClose: (rewardId: string) => void;\n  onClaimAll?: () => void;\n}\n\nconst RewardNotification: React.FC<RewardNotificationProps> = ({ \n  rewards, \n  onClose, \n  onClaimAll \n}) => {\n  const [visibleRewards, setVisibleRewards] = useState<Reward[]>([]);\n\n  useEffect(() => {\n    // Show rewards one by one with delay\n    rewards.forEach((reward, index) => {\n      setTimeout(() => {\n        setVisibleRewards(prev => [...prev, reward]);\n      }, index * 500);\n    });\n  }, [rewards]);\n\n  const getRarityColor = (rarity: string = 'common') => {\n    switch (rarity) {\n      case 'common': return 'from-gray-400 to-gray-600';\n      case 'uncommon': return 'from-green-400 to-green-600';\n      case 'rare': return 'from-blue-400 to-blue-600';\n      case 'epic': return 'from-purple-400 to-purple-600';\n      case 'legendary': return 'from-yellow-400 to-yellow-600';\n      default: return 'from-gray-400 to-gray-600';\n    }\n  };\n\n  const getRarityBorder = (rarity: string = 'common') => {\n    switch (rarity) {\n      case 'common': return 'border-gray-300';\n      case 'uncommon': return 'border-green-300';\n      case 'rare': return 'border-blue-300';\n      case 'epic': return 'border-purple-300';\n      case 'legendary': return 'border-yellow-300';\n      default: return 'border-gray-300';\n    }\n  };\n\n  const getTypeIcon = (type: string, CustomIcon?: React.ComponentType<any>) => {\n    if (CustomIcon) return CustomIcon;\n    \n    switch (type) {\n      case 'achievement': return Trophy;\n      case 'quest': return Star;\n      case 'level_up': return Crown;\n      case 'streak': return Medal;\n      case 'special': return Award;\n      default: return Gift;\n    }\n  };\n\n  const getTypeColor = (type: string) => {\n    switch (type) {\n      case 'achievement': return 'text-yellow-500';\n      case 'quest': return 'text-blue-500';\n      case 'level_up': return 'text-purple-500';\n      case 'streak': return 'text-orange-500';\n      case 'special': return 'text-pink-500';\n      default: return 'text-gray-500';\n    }\n  };\n\n  const handleCloseReward = (rewardId: string) => {\n    setVisibleRewards(prev => prev.filter(r => r.id !== rewardId));\n    onClose(rewardId);\n  };\n\n  const handleClaimAll = () => {\n    setVisibleRewards([]);\n    if (onClaimAll) onClaimAll();\n  };\n\n  if (visibleRewards.length === 0) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50\">\n      <div className=\"max-w-md w-full max-h-[80vh] overflow-y-auto\">\n        <AnimatePresence>\n          {visibleRewards.map((reward, index) => {\n            const IconComponent = getTypeIcon(reward.type, reward.icon);\n            \n            return (\n              <motion.div\n                key={reward.id}\n                initial={{ scale: 0, opacity: 0, y: 50 }}\n                animate={{ scale: 1, opacity: 1, y: 0 }}\n                exit={{ scale: 0, opacity: 0, y: -50 }}\n                transition={{ \n                  type: \"spring\", \n                  stiffness: 300, \n                  damping: 20,\n                  delay: index * 0.1\n                }}\n                className=\"mb-4\"\n              >\n                <Card className={`relative overflow-hidden border-2 ${getRarityBorder(reward.rarity)} shadow-2xl`}>\n                  {/* Animated Background */}\n                  <div className={`absolute inset-0 bg-gradient-to-br ${getRarityColor(reward.rarity)} opacity-10`} />\n                  \n                  {/* Sparkle Effects */}\n                  <div className=\"absolute inset-0 overflow-hidden\">\n                    {[...Array(6)].map((_, i) => (\n                      <motion.div\n                        key={i}\n                        className=\"absolute\"\n                        initial={{ scale: 0, opacity: 0 }}\n                        animate={{ \n                          scale: [0, 1, 0], \n                          opacity: [0, 1, 0],\n                          x: [0, Math.random() * 100 - 50],\n                          y: [0, Math.random() * 100 - 50]\n                        }}\n                        transition={{ \n                          duration: 2, \n                          repeat: Infinity, \n                          delay: i * 0.3,\n                          repeatDelay: 1\n                        }}\n                        style={{\n                          left: `${Math.random() * 100}%`,\n                          top: `${Math.random() * 100}%`\n                        }}\n                      >\n                        <Sparkles className=\"h-4 w-4 text-yellow-400\" />\n                      </motion.div>\n                    ))}\n                  </div>\n                  \n                  {/* Close Button */}\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"absolute top-2 right-2 z-10 h-6 w-6 p-0 hover:bg-white/20\"\n                    onClick={() => handleCloseReward(reward.id)}\n                  >\n                    <X className=\"h-3 w-3\" />\n                  </Button>\n                  \n                  <CardContent className=\"p-6 text-center relative z-10\">\n                    {/* Icon */}\n                    <motion.div\n                      initial={{ scale: 0, rotate: -180 }}\n                      animate={{ scale: 1, rotate: 0 }}\n                      transition={{ delay: 0.2, type: \"spring\", stiffness: 200 }}\n                      className={`mx-auto mb-4 p-4 rounded-full bg-white shadow-lg ${getTypeColor(reward.type)}`}\n                    >\n                      <IconComponent className=\"h-8 w-8\" />\n                    </motion.div>\n                    \n                    {/* Rarity Badge */}\n                    {reward.rarity && (\n                      <motion.div\n                        initial={{ opacity: 0, y: 20 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        transition={{ delay: 0.3 }}\n                        className=\"mb-3\"\n                      >\n                        <Badge \n                          className={`bg-gradient-to-r ${getRarityColor(reward.rarity)} text-white font-bold px-3 py-1`}\n                        >\n                          {reward.rarity.toUpperCase()}\n                        </Badge>\n                      </motion.div>\n                    )}\n                    \n                    {/* Title */}\n                    <motion.h3\n                      initial={{ opacity: 0, y: 20 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ delay: 0.4 }}\n                      className=\"text-xl font-bold mb-2 text-foreground\"\n                    >\n                      {reward.title}\n                    </motion.h3>\n                    \n                    {/* Description */}\n                    <motion.p\n                      initial={{ opacity: 0, y: 20 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ delay: 0.5 }}\n                      className=\"text-muted-foreground mb-4\"\n                    >\n                      {reward.description}\n                    </motion.p>\n                    \n                    {/* Rewards */}\n                    <motion.div\n                      initial={{ opacity: 0, y: 20 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ delay: 0.6 }}\n                      className=\"flex justify-center gap-4 mb-4\"\n                    >\n                      {reward.xp && (\n                        <div className=\"flex items-center gap-1 bg-blue-100 text-blue-700 px-3 py-1 rounded-full\">\n                          <Star className=\"h-4 w-4\" />\n                          <span className=\"font-medium\">+{reward.xp} XP</span>\n                        </div>\n                      )}\n                      {reward.coins && (\n                        <div className=\"flex items-center gap-1 bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full\">\n                          <div className=\"h-4 w-4 rounded-full bg-yellow-400\" />\n                          <span className=\"font-medium\">+{reward.coins}</span>\n                        </div>\n                      )}\n                    </motion.div>\n                    \n                    {/* Items */}\n                    {reward.items && reward.items.length > 0 && (\n                      <motion.div\n                        initial={{ opacity: 0, y: 20 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        transition={{ delay: 0.7 }}\n                        className=\"mb-4\"\n                      >\n                        <p className=\"text-sm text-muted-foreground mb-2\">Items Unlocked:</p>\n                        <div className=\"flex flex-wrap justify-center gap-2\">\n                          {reward.items.map((item, itemIndex) => (\n                            <Badge key={itemIndex} variant=\"secondary\" className=\"text-xs\">\n                              <Gift className=\"h-3 w-3 mr-1\" />\n                              {item}\n                            </Badge>\n                          ))}\n                        </div>\n                      </motion.div>\n                    )}\n                    \n                    {/* Claim Button */}\n                    <motion.div\n                      initial={{ opacity: 0, scale: 0.8 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      transition={{ delay: 0.8 }}\n                    >\n                      <Button\n                        className={`bg-gradient-to-r ${getRarityColor(reward.rarity)} hover:opacity-90 text-white font-bold px-6 py-2`}\n                        onClick={() => handleCloseReward(reward.id)}\n                      >\n                        <Zap className=\"h-4 w-4 mr-2\" />\n                        Claim Reward!\n                      </Button>\n                    </motion.div>\n                  </CardContent>\n                </Card>\n              </motion.div>\n            );\n          })}\n        </AnimatePresence>\n        \n        {/* Claim All Button */}\n        {visibleRewards.length > 1 && (\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 1 }}\n            className=\"text-center\"\n          >\n            <Button\n              variant=\"outline\"\n              className=\"bg-white/90 hover:bg-white\"\n              onClick={handleClaimAll}\n            >\n              <Gift className=\"h-4 w-4 mr-2\" />\n              Claim All ({visibleRewards.length})\n            </Button>\n          </motion.div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default RewardNotification;","import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { \n  Crown, \n  Star, \n  Sparkles, \n  Trophy, \n  Zap,\n  Gift,\n  ArrowUp,\n  X\n} from 'lucide-react';\n\ninterface LevelUpData {\n  oldLevel: number;\n  newLevel: number;\n  xpGained: number;\n  totalXP: number;\n  nextLevelXP: number;\n  rewards?: {\n    coins: number;\n    items?: string[];\n    unlocks?: string[];\n  };\n}\n\ninterface LevelUpAnimationProps {\n  isVisible: boolean;\n  levelData: LevelUpData;\n  onClose: () => void;\n}\n\nconst LevelUpAnimation: React.FC<LevelUpAnimationProps> = ({ \n  isVisible, \n  levelData, \n  onClose \n}) => {\n  const [animationPhase, setAnimationPhase] = useState(0);\n  const [showRewards, setShowRewards] = useState(false);\n\n  useEffect(() => {\n    if (isVisible) {\n      setAnimationPhase(0);\n      setShowRewards(false);\n      \n      // Animation sequence\n      const timeouts = [\n        setTimeout(() => setAnimationPhase(1), 500),   // Show level up\n        setTimeout(() => setAnimationPhase(2), 1500),  // Show XP animation\n        setTimeout(() => setAnimationPhase(3), 2500),  // Show rewards\n        setTimeout(() => setShowRewards(true), 3000),  // Enable rewards interaction\n      ];\n      \n      return () => timeouts.forEach(clearTimeout);\n    }\n    return undefined;\n  }, [isVisible]);\n\n  if (!isVisible) return null;\n\n  const progressPercentage = (levelData.totalXP / levelData.nextLevelXP) * 100;\n\n  return (\n    <AnimatePresence>\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70\">\n        {/* Background Effects */}\n        <div className=\"absolute inset-0 overflow-hidden\">\n          {[...Array(20)].map((_, i) => (\n            <motion.div\n              key={i}\n              className=\"absolute\"\n              initial={{ scale: 0, opacity: 0 }}\n              animate={{ \n                scale: [0, 1, 0], \n                opacity: [0, 1, 0],\n                x: [0, (Math.random() - 0.5) * 200],\n                y: [0, (Math.random() - 0.5) * 200]\n              }}\n              transition={{ \n                duration: 3, \n                repeat: Infinity, \n                delay: i * 0.1,\n                repeatDelay: 2\n              }}\n              style={{\n                left: `${Math.random() * 100}%`,\n                top: `${Math.random() * 100}%`\n              }}\n            >\n              <Star className=\"h-3 w-3 text-yellow-400\" />\n            </motion.div>\n          ))}\n        </div>\n\n        <motion.div\n          initial={{ scale: 0, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          exit={{ scale: 0, opacity: 0 }}\n          transition={{ type: \"spring\", stiffness: 200, damping: 20 }}\n          className=\"relative max-w-md w-full\"\n        >\n          <Card className=\"relative overflow-hidden border-2 border-yellow-400 shadow-2xl bg-gradient-to-br from-yellow-50 to-orange-50\">\n            {/* Close Button */}\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"absolute top-2 right-2 z-10 h-6 w-6 p-0 hover:bg-white/20\"\n              onClick={onClose}\n            >\n              <X className=\"h-3 w-3\" />\n            </Button>\n\n            {/* Animated Crown */}\n            <div className=\"absolute -top-8 left-1/2 transform -translate-x-1/2\">\n              <motion.div\n                initial={{ y: -50, opacity: 0, rotate: -45 }}\n                animate={{ y: 0, opacity: 1, rotate: 0 }}\n                transition={{ delay: 0.2, type: \"spring\", stiffness: 200 }}\n                className=\"bg-yellow-400 p-3 rounded-full shadow-lg\"\n              >\n                <Crown className=\"h-8 w-8 text-white\" />\n              </motion.div>\n            </div>\n\n            <CardContent className=\"p-8 pt-12 text-center\">\n              {/* Level Up Text */}\n              <motion.div\n                initial={{ opacity: 0, y: 30 }}\n                animate={{ opacity: animationPhase >= 1 ? 1 : 0, y: animationPhase >= 1 ? 0 : 30 }}\n                transition={{ duration: 0.6 }}\n                className=\"mb-6\"\n              >\n                <h2 className=\"text-3xl font-bold text-yellow-600 mb-2\">\n                  LEVEL UP!\n                </h2>\n                <div className=\"flex items-center justify-center gap-4 mb-4\">\n                  <motion.div\n                    initial={{ scale: 1 }}\n                    animate={{ scale: animationPhase >= 1 ? [1, 1.2, 1] : 1 }}\n                    transition={{ duration: 0.5, delay: 0.5 }}\n                    className=\"text-4xl font-bold text-gray-600\"\n                  >\n                    {levelData.oldLevel}\n                  </motion.div>\n                  \n                  <motion.div\n                    initial={{ x: -20, opacity: 0 }}\n                    animate={{ x: animationPhase >= 1 ? 0 : -20, opacity: animationPhase >= 1 ? 1 : 0 }}\n                    transition={{ delay: 0.8 }}\n                  >\n                    <ArrowUp className=\"h-6 w-6 text-green-500\" />\n                  </motion.div>\n                  \n                  <motion.div\n                    initial={{ scale: 0, rotate: -180 }}\n                    animate={{ \n                      scale: animationPhase >= 1 ? 1 : 0, \n                      rotate: animationPhase >= 1 ? 0 : -180 \n                    }}\n                    transition={{ delay: 1, type: \"spring\", stiffness: 200 }}\n                    className=\"text-4xl font-bold text-yellow-600 relative\"\n                  >\n                    {levelData.newLevel}\n                    {/* Sparkle effect around new level */}\n                    <motion.div\n                      initial={{ scale: 0 }}\n                      animate={{ scale: animationPhase >= 1 ? [0, 1.5, 0] : 0 }}\n                      transition={{ delay: 1.2, duration: 1 }}\n                      className=\"absolute -inset-2\"\n                    >\n                      <Sparkles className=\"h-8 w-8 text-yellow-400 absolute -top-2 -right-2\" />\n                      <Sparkles className=\"h-6 w-6 text-yellow-400 absolute -bottom-1 -left-1\" />\n                    </motion.div>\n                  </motion.div>\n                </div>\n              </motion.div>\n\n              {/* XP Animation */}\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: animationPhase >= 2 ? 1 : 0, y: animationPhase >= 2 ? 0 : 20 }}\n                transition={{ duration: 0.6 }}\n                className=\"mb-6\"\n              >\n                <div className=\"flex items-center justify-center gap-2 mb-3\">\n                  <Zap className=\"h-5 w-5 text-blue-500\" />\n                  <span className=\"text-lg font-semibold text-blue-600\">\n                    +{levelData.xpGained} XP\n                  </span>\n                </div>\n                \n                <div className=\"bg-white/50 rounded-lg p-3\">\n                  <div className=\"flex justify-between text-sm text-gray-600 mb-2\">\n                    <span>Progress to Level {levelData.newLevel + 1}</span>\n                    <span>{levelData.totalXP} / {levelData.nextLevelXP} XP</span>\n                  </div>\n                  <motion.div\n                    initial={{ width: 0 }}\n                    animate={{ width: animationPhase >= 2 ? `${progressPercentage}%` : 0 }}\n                    transition={{ duration: 1, delay: 0.3 }}\n                  >\n                    <Progress value={progressPercentage} className=\"h-3\" />\n                  </motion.div>\n                </div>\n              </motion.div>\n\n              {/* Rewards Section */}\n              {levelData.rewards && (\n                <motion.div\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: animationPhase >= 3 ? 1 : 0, y: animationPhase >= 3 ? 0 : 20 }}\n                  transition={{ duration: 0.6 }}\n                  className=\"mb-6\"\n                >\n                  <h3 className=\"text-lg font-semibold text-gray-700 mb-3 flex items-center justify-center gap-2\">\n                    <Gift className=\"h-5 w-5 text-purple-500\" />\n                    Level Rewards\n                  </h3>\n                  \n                  <div className=\"bg-white/50 rounded-lg p-4 space-y-3\">\n                    {/* Coins */}\n                    <motion.div\n                      initial={{ x: -20, opacity: 0 }}\n                      animate={{ x: showRewards ? 0 : -20, opacity: showRewards ? 1 : 0 }}\n                      transition={{ delay: 0.2 }}\n                      className=\"flex items-center justify-center gap-2 bg-yellow-100 text-yellow-700 px-4 py-2 rounded-full\"\n                    >\n                      <div className=\"h-5 w-5 rounded-full bg-yellow-400\" />\n                      <span className=\"font-medium\">+{levelData.rewards.coins} Coins</span>\n                    </motion.div>\n                    \n                    {/* Items */}\n                    {levelData.rewards.items && levelData.rewards.items.length > 0 && (\n                      <motion.div\n                        initial={{ x: -20, opacity: 0 }}\n                        animate={{ x: showRewards ? 0 : -20, opacity: showRewards ? 1 : 0 }}\n                        transition={{ delay: 0.4 }}\n                        className=\"space-y-2\"\n                      >\n                        <p className=\"text-sm text-gray-600\">New Items Unlocked:</p>\n                        <div className=\"flex flex-wrap justify-center gap-2\">\n                          {levelData.rewards.items.map((item, index) => (\n                            <motion.div\n                              key={index}\n                              initial={{ scale: 0 }}\n                              animate={{ scale: showRewards ? 1 : 0 }}\n                              transition={{ delay: 0.6 + index * 0.1 }}\n                              className=\"bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-xs font-medium\"\n                            >\n                              {item}\n                            </motion.div>\n                          ))}\n                        </div>\n                      </motion.div>\n                    )}\n                    \n                    {/* Unlocks */}\n                    {levelData.rewards.unlocks && levelData.rewards.unlocks.length > 0 && (\n                      <motion.div\n                        initial={{ x: -20, opacity: 0 }}\n                        animate={{ x: showRewards ? 0 : -20, opacity: showRewards ? 1 : 0 }}\n                        transition={{ delay: 0.8 }}\n                        className=\"space-y-2\"\n                      >\n                        <p className=\"text-sm text-gray-600\">Features Unlocked:</p>\n                        <div className=\"space-y-1\">\n                          {levelData.rewards.unlocks.map((unlock, index) => (\n                            <motion.div\n                              key={index}\n                              initial={{ x: -20, opacity: 0 }}\n                              animate={{ x: showRewards ? 0 : -20, opacity: showRewards ? 1 : 0 }}\n                              transition={{ delay: 1 + index * 0.1 }}\n                              className=\"flex items-center gap-2 text-sm text-green-600\"\n                            >\n                              <Trophy className=\"h-4 w-4\" />\n                              {unlock}\n                            </motion.div>\n                          ))}\n                        </div>\n                      </motion.div>\n                    )}\n                  </div>\n                </motion.div>\n              )}\n\n              {/* Continue Button */}\n              <motion.div\n                initial={{ opacity: 0, scale: 0.8 }}\n                animate={{ opacity: showRewards ? 1 : 0, scale: showRewards ? 1 : 0.8 }}\n                transition={{ delay: 1.5 }}\n              >\n                <Button\n                  className=\"bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white font-bold px-8 py-3 text-lg\"\n                  onClick={onClose}\n                >\n                  <Sparkles className=\"h-5 w-5 mr-2\" />\n                  Awesome!\n                </Button>\n              </motion.div>\n            </CardContent>\n          </Card>\n        </motion.div>\n      </div>\n    </AnimatePresence>\n  );\n};\n\nexport default LevelUpAnimation;","import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Trophy, Coins, Zap, Target, Calendar, Award } from 'lucide-react';\nimport { useAuthStore } from '@/stores/authStore';\nimport { getAuthHeaders } from '@/stores/authStore';\n\ninterface UserStatsData {\n  level: number;\n  xp: number;\n  xpToNextLevel: number;\n  coins: number;\n  dailyStreak: number;\n  totalStudyTime: number;\n  achievements: string[];\n  questsCompleted: number;\n  totalQuests: number;\n}\n\nexport const UserStats: React.FC = () => {\n  const [stats, setStats] = useState<UserStatsData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const { user } = useAuthStore();\n\n  useEffect(() => {\n    fetchUserStats();\n  }, []);\n\n  const fetchUserStats = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch('/api/rewards/user-stats', {\n        headers: getAuthHeaders(),\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setStats(data);\n      } else {\n        // Fallback to user data from authStore\n        if (user) {\n          setStats({\n            level: user.level || 1,\n            xp: user.xp || 0,\n            xpToNextLevel: 1000 - ((user.xp || 0) % 1000),\n            coins: user.coins || 0,\n            dailyStreak: user.dailyStreak || 0,\n            totalStudyTime: 0,\n            achievements: [],\n            questsCompleted: 0,\n            totalQuests: 10\n          });\n        }\n      }\n    } catch (error) {\n      console.error('Failed to fetch user stats:', error);\n      // Fallback to user data from authStore\n      if (user) {\n        setStats({\n          level: user.level || 1,\n          xp: user.xp || 0,\n          xpToNextLevel: 1000 - ((user.xp || 0) % 1000),\n          coins: user.coins || 0,\n          dailyStreak: user.dailyStreak || 0,\n          totalStudyTime: 0,\n          achievements: [],\n          questsCompleted: 0,\n          totalQuests: 10\n        });\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const formatStudyTime = (minutes: number) => {\n    const hours = Math.floor(minutes / 60);\n    const mins = minutes % 60;\n    if (hours > 0) {\n      return `${hours}j ${mins}m`;\n    }\n    return `${mins}m`;\n  };\n\n  const getXPProgress = () => {\n    if (!stats) return 0;\n    const currentLevelXP = stats.xp - (stats.level - 1) * 1000; // Assuming 1000 XP per level\n    return (currentLevelXP / 1000) * 100;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        {[...Array(4)].map((_, i) => (\n          <Card key={i}>\n            <CardContent className=\"p-6\">\n              <div className=\"animate-pulse\">\n                <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n                <div className=\"h-6 bg-gray-200 rounded w-1/2\"></div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    );\n  }\n\n  if (!stats) {\n    return (\n      <Card>\n        <CardContent className=\"p-6\">\n          <p className=\"text-center text-gray-500\">Gagal memuat statistik pengguna</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Main Stats Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        {/* Level Card */}\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Level</p>\n                <p className=\"text-2xl font-bold text-purple-600\">{stats.level}</p>\n              </div>\n              <Trophy className=\"h-8 w-8 text-purple-600\" />\n            </div>\n            <div className=\"mt-4\">\n              <div className=\"flex justify-between text-xs text-gray-500 mb-1\">\n                <span>XP Progress</span>\n                <span>{stats.xp} / {stats.xpToNextLevel}</span>\n              </div>\n              <Progress value={getXPProgress()} className=\"h-2\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Coins Card */}\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Koin</p>\n                <p className=\"text-2xl font-bold text-yellow-600\">{stats.coins.toLocaleString()}</p>\n              </div>\n              <Coins className=\"h-8 w-8 text-yellow-600\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Daily Streak Card */}\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Streak Harian</p>\n                <p className=\"text-2xl font-bold text-orange-600\">{stats.dailyStreak}</p>\n              </div>\n              <Calendar className=\"h-8 w-8 text-orange-600\" />\n            </div>\n            <p className=\"text-xs text-gray-500 mt-2\">hari berturut-turut</p>\n          </CardContent>\n        </Card>\n\n        {/* Study Time Card */}\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Waktu Belajar</p>\n                <p className=\"text-2xl font-bold text-blue-600\">{formatStudyTime(stats.totalStudyTime)}</p>\n              </div>\n              <Zap className=\"h-8 w-8 text-blue-600\" />\n            </div>\n            <p className=\"text-xs text-gray-500 mt-2\">total waktu</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Detailed Stats */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Quest Progress */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Target className=\"h-5 w-5\" />\n              Progress Quest\n            </CardTitle>\n            <CardDescription>\n              Kemajuan penyelesaian quest Anda\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm font-medium\">Quest Selesai</span>\n                <Badge variant=\"secondary\">\n                  {stats.questsCompleted} / {stats.totalQuests}\n                </Badge>\n              </div>\n              <Progress \n                value={(stats.questsCompleted / stats.totalQuests) * 100} \n                className=\"h-3\"\n              />\n              <p className=\"text-xs text-gray-500\">\n                {Math.round((stats.questsCompleted / stats.totalQuests) * 100)}% quest telah diselesaikan\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Achievements */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Award className=\"h-5 w-5\" />\n              Pencapaian\n            </CardTitle>\n            <CardDescription>\n              Pencapaian yang telah Anda raih\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm font-medium\">Total Pencapaian</span>\n                <Badge variant=\"outline\">\n                  {stats.achievements.length}\n                </Badge>\n              </div>\n              \n              {stats.achievements.length > 0 ? (\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {stats.achievements.slice(0, 6).map((achievement, index) => (\n                    <Badge key={index} variant=\"secondary\" className=\"text-xs\">\n                      {achievement}\n                    </Badge>\n                  ))}\n                  {stats.achievements.length > 6 && (\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      +{stats.achievements.length - 6} lainnya\n                    </Badge>\n                  )}\n                </div>\n              ) : (\n                <p className=\"text-sm text-gray-500\">\n                  Belum ada pencapaian. Mulai belajar untuk mendapatkan pencapaian pertama!\n                </p>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach((key) => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data.arrayBuffer().then(toArray).then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, (encoded) => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE, } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType),\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType),\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1),\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type],\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET, } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, (encodedPacket) => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, (encodedPacket) => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        },\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* State.READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* State.READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* State.READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* State.READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        },\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload, };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\nexport const defaultBinaryType = \"arraybuffer\";\nexport function createCookieJar() { }\n","import { globalThisShim as globalThis } from \"./globals.node.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n/**\n * Generates a random 8-characters string.\n */\nexport function randomString() {\n    return (Date.now().toString(36).substring(3) +\n        Math.random().toString(36).substring(2, 5));\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { Transport } from \"../transport.js\";\nimport { randomString } from \"../util.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nexport class Polling extends Transport {\n    constructor() {\n        super(...arguments);\n        this._polling = false;\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this._poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this._polling || !this.writable) {\n            let total = 0;\n            if (this._polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    _poll() {\n        this._polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this._polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this._poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","import { Polling } from \"./polling.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globals.node.js\";\nimport { hasCORS } from \"../contrib/has-cors.js\";\nfunction empty() { }\nexport class BaseXHR extends Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(createRequest, uri, opts) {\n        super();\n        this.createRequest = createRequest;\n        installTimerFunctions(this, opts);\n        this._opts = opts;\n        this._method = opts.method || \"GET\";\n        this._uri = uri;\n        this._data = undefined !== opts.data ? opts.data : null;\n        this._create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    _create() {\n        var _a;\n        const opts = pick(this._opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this._opts.xd;\n        const xhr = (this._xhr = this.createRequest(opts));\n        try {\n            xhr.open(this._method, this._uri, true);\n            try {\n                if (this._opts.extraHeaders) {\n                    // @ts-ignore\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this._opts.extraHeaders) {\n                        if (this._opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this._opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this._method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this._opts.withCredentials;\n            }\n            if (this._opts.requestTimeout) {\n                xhr.timeout = this._opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(\n                    // @ts-ignore\n                    xhr.getResponseHeader(\"set-cookie\"));\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this._onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this._onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this._data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this._onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this._index = Request.requestsCount++;\n            Request.requests[this._index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    _onError(err) {\n        this.emitReserved(\"error\", err, this._xhr);\n        this._cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    _cleanup(fromError) {\n        if (\"undefined\" === typeof this._xhr || null === this._xhr) {\n            return;\n        }\n        this._xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this._xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this._index];\n        }\n        this._xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    _onLoad() {\n        const data = this._xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this._cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this._cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\nconst hasXHR2 = (function () {\n    const xhr = newRequest({\n        xdomain: false,\n    });\n    return xhr && xhr.responseType !== null;\n})();\n/**\n * HTTP long-polling based on the built-in `XMLHttpRequest` object.\n *\n * Usage: browser\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n */\nexport class XHR extends BaseXHR {\n    constructor(opts) {\n        super(opts);\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd }, this.opts);\n        return new Request(newRequest, this.uri(), opts);\n    }\n}\nfunction newRequest(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { pick, randomString } from \"../util.js\";\nimport { encodePacket } from \"engine.io-parser\";\nimport { globalThisShim as globalThis, nextTick } from \"../globals.node.js\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class BaseWS extends Transport {\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws = this.createSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    this.doWrite(packet, data);\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.onerror = () => { };\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\nconst WebSocketCtor = globalThis.WebSocket || globalThis.MozWebSocket;\n/**\n * WebSocket transport based on the built-in `WebSocket` object.\n *\n * Usage: browser, Node.js (since v21), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n * @see https://caniuse.com/mdn-api_websocket\n * @see https://nodejs.org/api/globals.html#websocket\n */\nexport class WS extends BaseWS {\n    createSocket(uri, protocols, opts) {\n        return !isReactNative\n            ? protocols\n                ? new WebSocketCtor(uri, protocols)\n                : new WebSocketCtor(uri)\n            : new WebSocketCtor(uri, protocols, opts);\n    }\n    doWrite(_packet, data) {\n        this.ws.send(data);\n    }\n}\n","import { XHR } from \"./polling-xhr.node.js\";\nimport { WS } from \"./websocket.node.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: XHR,\n};\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"../globals.node.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\n/**\n * WebTransport transport based on the built-in `WebTransport` object.\n *\n * Usage: browser, Node.js (with the `@fails-components/webtransport` package)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebTransport\n * @see https://caniuse.com/webtransport\n */\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        try {\n            // @ts-ignore\n            this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this._transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this._transport.ready.then(() => {\n            this._transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this._writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this._writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this._writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this._transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 8000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports as DEFAULT_TRANSPORTS } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { createCookieJar, defaultBinaryType, nextTick, } from \"./globals.node.js\";\nconst withEventListeners = typeof addEventListener === \"function\" &&\n    typeof removeEventListener === \"function\";\nconst OFFLINE_EVENT_LISTENERS = [];\nif (withEventListeners) {\n    // within a ServiceWorker, any event handler for the 'offline' event must be added on the initial evaluation of the\n    // script, so we create one single event listener here which will forward the event to the socket instances\n    addEventListener(\"offline\", () => {\n        OFFLINE_EVENT_LISTENERS.forEach((listener) => listener());\n    }, false);\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes without upgrade mechanism, which means that it will keep the first low-level transport that\n * successfully establishes the connection.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithoutUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithoutUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithUpgrade\n * @see Socket\n */\nexport class SocketWithoutUpgrade extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        this._prevBufferLen = 0;\n        this._pingInterval = -1;\n        this._pingTimeout = -1;\n        this._maxPayload = -1;\n        /**\n         * The expiration timestamp of the {@link _pingTimeoutTimer} object is tracked, in case the timer is throttled and the\n         * callback is not fired on time. This can happen for example when a laptop is suspended or when a phone is locked.\n         */\n        this._pingTimeoutTime = Infinity;\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            const parsedUri = parse(uri);\n            opts.hostname = parsedUri.host;\n            opts.secure =\n                parsedUri.protocol === \"https\" || parsedUri.protocol === \"wss\";\n            opts.port = parsedUri.port;\n            if (parsedUri.query)\n                opts.query = parsedUri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = [];\n        this._transportsByName = {};\n        opts.transports.forEach((t) => {\n            const transportName = t.prototype.name;\n            this.transports.push(transportName);\n            this._transportsByName[transportName] = t;\n        });\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        if (withEventListeners) {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this._beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this._offlineEventListener = () => {\n                    this._onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener);\n            }\n        }\n        if (this.opts.withCredentials) {\n            this._cookieJar = createCookieJar();\n        }\n        this._open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new this._transportsByName[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    _open() {\n        if (this.transports.length === 0) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        const transportName = this.opts.rememberUpgrade &&\n            SocketWithoutUpgrade.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1\n            ? \"websocket\"\n            : this.transports[0];\n        this.readyState = \"opening\";\n        const transport = this.createTransport(transportName);\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this._onDrain.bind(this))\n            .on(\"packet\", this._onPacket.bind(this))\n            .on(\"error\", this._onError.bind(this))\n            .on(\"close\", (reason) => this._onClose(\"transport close\", reason));\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        SocketWithoutUpgrade.priorWebsocketSuccess =\n            \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    _onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this._sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    this._resetPingTimeout();\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this._onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this._pingInterval = data.pingInterval;\n        this._pingTimeout = data.pingTimeout;\n        this._maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this._resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    _resetPingTimeout() {\n        this.clearTimeoutFn(this._pingTimeoutTimer);\n        const delay = this._pingInterval + this._pingTimeout;\n        this._pingTimeoutTime = Date.now() + delay;\n        this._pingTimeoutTimer = this.setTimeoutFn(() => {\n            this._onClose(\"ping timeout\");\n        }, delay);\n        if (this.opts.autoUnref) {\n            this._pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    _onDrain() {\n        this.writeBuffer.splice(0, this._prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this._prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this._getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this._prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    _getWritablePackets() {\n        const shouldCheckPayloadSize = this._maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this._maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Checks whether the heartbeat timer has expired but the socket has not yet been notified.\n     *\n     * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the\n     * `write()` method then the message would not be buffered by the Socket.IO client.\n     *\n     * @return {boolean}\n     * @private\n     */\n    /* private */ _hasPingExpired() {\n        if (!this._pingTimeoutTime)\n            return true;\n        const hasExpired = Date.now() > this._pingTimeoutTime;\n        if (hasExpired) {\n            this._pingTimeoutTime = 0;\n            nextTick(() => {\n                this._onClose(\"ping timeout\");\n            }, this.setTimeoutFn);\n        }\n        return hasExpired;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a message. Alias of {@link Socket#write}.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    send(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    _sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this._onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    _onError(err) {\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        if (this.opts.tryAllTransports &&\n            this.transports.length > 1 &&\n            this.readyState === \"opening\") {\n            this.transports.shift();\n            return this._open();\n        }\n        this.emitReserved(\"error\", err);\n        this._onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    _onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this._pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (withEventListeners) {\n                if (this._beforeunloadEventListener) {\n                    removeEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n                }\n                if (this._offlineEventListener) {\n                    const i = OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);\n                    if (i !== -1) {\n                        OFFLINE_EVENT_LISTENERS.splice(i, 1);\n                    }\n                }\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this._prevBufferLen = 0;\n        }\n    }\n}\nSocketWithoutUpgrade.protocol = protocol;\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see Socket\n */\nexport class SocketWithUpgrade extends SocketWithoutUpgrade {\n    constructor() {\n        super(...arguments);\n        this._upgrades = [];\n    }\n    onOpen() {\n        super.onOpen();\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            for (let i = 0; i < this._upgrades.length; i++) {\n                this._probe(this._upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    _probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    SocketWithoutUpgrade.priorWebsocketSuccess =\n                        \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this._upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    onHandshake(data) {\n        this._upgrades = this._filterUpgrades(data.upgrades);\n        super.onHandshake(data);\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    _filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        for (let i = 0; i < upgrades.length; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * @example\n * import { Socket } from \"engine.io-client\";\n *\n * const socket = new Socket();\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see SocketWithUpgrade\n */\nexport class Socket extends SocketWithUpgrade {\n    constructor(uri, opts = {}) {\n        const o = typeof uri === \"object\" ? uri : opts;\n        if (!o.transports ||\n            (o.transports && typeof o.transports[0] === \"string\")) {\n            o.transports = (o.transports || [\"polling\", \"websocket\", \"webtransport\"])\n                .map((transportName) => DEFAULT_TRANSPORTS[transportName])\n                .filter((t) => !!t);\n        }\n        super(uri, o);\n    }\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        /**\n         * A map containing acknowledgement handlers.\n         *\n         * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n         *\n         * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n         * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n         * - `const value = await socket.emitWithAck(\"test\")`\n         *\n         * From those that don't:\n         *\n         * - `socket.emit(\"test\", (value) => { ... });`\n         *\n         * In the first case, the handlers will be called with an error when:\n         *\n         * - the timeout is reached\n         * - the socket gets disconnected\n         *\n         * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n         * an acknowledgement from the server.\n         *\n         * @private\n         */\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        var _a, _b, _c;\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = (_b = (_a = this.io.engine) === null || _a === void 0 ? void 0 : _a.transport) === null || _b === void 0 ? void 0 : _b.writable;\n        const isConnected = this.connected && !((_c = this.io.engine) === null || _c === void 0 ? void 0 : _c._hasPingExpired());\n        const discardPacket = this.flags.volatile && !isTransportWritable;\n        if (discardPacket) {\n        }\n        else if (isConnected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        const fn = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, args);\n        };\n        fn.withError = true;\n        this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        return new Promise((resolve, reject) => {\n            const fn = (arg1, arg2) => {\n                return arg1 ? reject(arg1) : resolve(arg2);\n            };\n            fn.withError = true;\n            args.push(fn);\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n        this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */\n    _clearAcks() {\n        Object.keys(this.acks).forEach((id) => {\n            const isBuffered = this.sendBuffer.some((packet) => String(packet.id) === id);\n            if (!isBuffered) {\n                // note: handlers that do not accept an error as first argument are ignored here\n                const ack = this.acks[id];\n                delete this.acks[id];\n                if (ack.withError) {\n                    ack.call(this, new Error(\"socket has been disconnected\"));\n                }\n            }\n        });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (typeof ack !== \"function\") {\n            return;\n        }\n        delete this.acks[packet.id];\n        // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n        if (ack.withError) {\n            packet.data.unshift(null);\n        }\n        // @ts-ignore\n        ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        if (!v) {\n            this.skipReconnect = true;\n        }\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), \n        // @ts-ignore\n        on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called when:\n     *\n     * - the low-level engine is closed\n     * - the parser encountered a badly formatted packet\n     * - all sockets are disconnected\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        var _a;\n        this.cleanup();\n        (_a = this.engine) === null || _a === void 0 ? void 0 : _a.close();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\nexport { Fetch, NodeXHR, XHR, NodeWebSocket, WebSocket, WebTransport, } from \"engine.io-client\";\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","import { useEffect, useRef, useState } from 'react';\nimport { io, Socket } from 'socket.io-client';\nimport { useAuthStore } from '../stores/authStore';\nimport { toast } from 'sonner';\n\n// Socket event interfaces removed as they were unused\n\ninterface UseSocketReturn {\n  socket: Socket | null;\n  isConnected: boolean;\n  connectionError: string | null;\n  emit: (event: string, data?: any) => void;\n  disconnect: () => void;\n  reconnect: () => void;\n}\n\nlet socketInstance: Socket | null = null;\n\nexport const useSocket = (): UseSocketReturn => {\n  const { token, updateUserStats } = useAuthStore();\n  const [isConnected, setIsConnected] = useState(false);\n  const [connectionError, setConnectionError] = useState<string | null>(null);\n  const reconnectTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const reconnectAttemptsRef = useRef(0);\n  const maxReconnectAttempts = 5;\n\n  const initializeSocket = () => {\n    if (!token) {\n      console.log('No user token available for socket connection');\n      return;\n    }\n\n    if (socketInstance?.connected) {\n      console.log('Socket already connected');\n      return;\n    }\n\n    try {\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:3001';\n      \n      socketInstance = io(apiUrl, {\n        auth: {\n          token: token\n        },\n        transports: ['websocket', 'polling'],\n        timeout: 10000,\n        reconnection: true,\n        reconnectionAttempts: maxReconnectAttempts,\n        reconnectionDelay: 1000,\n        reconnectionDelayMax: 5000,\n      });\n\n      // Connection event handlers\n      socketInstance.on('connect', () => {\n        console.log('Socket connected successfully');\n        setIsConnected(true);\n        setConnectionError(null);\n        reconnectAttemptsRef.current = 0;\n        \n        toast.success('🔌 Connected to real-time updates', {\n          duration: 2000,\n        });\n      });\n\n      socketInstance.on('disconnect', (reason) => {\n        console.log('Socket disconnected:', reason);\n        setIsConnected(false);\n        \n        if (reason === 'io server disconnect') {\n          // Server initiated disconnect, try to reconnect\n          socketInstance?.connect();\n        }\n      });\n\n      socketInstance.on('connect_error', (error) => {\n        console.error('Socket connection error:', error);\n        setConnectionError(error.message);\n        setIsConnected(false);\n        \n        reconnectAttemptsRef.current += 1;\n        \n        if (reconnectAttemptsRef.current >= maxReconnectAttempts) {\n          toast.error('Failed to connect to real-time updates', {\n            description: 'Please refresh the page to try again',\n            duration: 5000,\n          });\n        }\n      });\n\n      // Gamification event handlers\n      socketInstance.on('reward:claimed', (data) => {\n        console.log('Reward claimed:', data);\n        \n        // Update user stats in store\n        updateUserStats({\n          level: data.userStats.level,\n          xp: data.userStats.xp,\n          coins: data.userStats.coins,\n          dailyStreak: data.userStats.dailyStreak,\n        });\n        \n        // Show success notification\n        toast.success('🎉 Reward Claimed!', {\n          description: data.message,\n          duration: 4000,\n        });\n      });\n\n      socketInstance.on('quest:completed', (data) => {\n        console.log('Quest completed:', data);\n        \n        // Update user stats\n        updateUserStats({\n          level: data.userStats.level,\n          xp: data.userStats.xp,\n          coins: data.userStats.coins,\n        });\n        \n        // Show quest completion notification\n        toast.success('🏆 Quest Completed!', {\n          description: `${data.questTitle} - Earned ${data.reward.coins} coins and ${data.reward.xp} XP!`,\n          duration: 5000,\n        });\n      });\n\n      socketInstance.on('quest:progress', (data) => {\n        console.log('Quest progress updated:', data);\n        \n        if (data.completed) {\n          toast.success('✅ Quest Ready to Claim!', {\n            description: `${data.questTitle} (${data.progress}/${data.target})`,\n            duration: 3000,\n          });\n        } else {\n          toast.info('📈 Quest Progress', {\n            description: `${data.questTitle}: ${data.progress}/${data.target}`,\n            duration: 2000,\n          });\n        }\n      });\n\n      socketInstance.on('level:up', (data) => {\n        console.log('Level up:', data);\n        \n        toast.success('🎊 Level Up!', {\n          description: `Congratulations! You've reached level ${data.newLevel}!`,\n          duration: 6000,\n        });\n      });\n\n      socketInstance.on('achievement:unlocked', (data) => {\n        console.log('Achievement unlocked:', data);\n        \n        toast.success('🏅 Achievement Unlocked!', {\n          description: `${data.title}: ${data.description}`,\n          duration: 5000,\n        });\n      });\n\n    } catch (error) {\n      console.error('Failed to initialize socket:', error);\n      setConnectionError(error instanceof Error ? error.message : 'Unknown error');\n    }\n  };\n\n  const disconnect = () => {\n    if (socketInstance) {\n      socketInstance.disconnect();\n      socketInstance = null;\n      setIsConnected(false);\n      setConnectionError(null);\n    }\n    \n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current);\n      reconnectTimeoutRef.current = null;\n    }\n  };\n\n  const reconnect = () => {\n    disconnect();\n    reconnectAttemptsRef.current = 0;\n    \n    // Wait a bit before reconnecting\n    reconnectTimeoutRef.current = setTimeout(() => {\n      initializeSocket();\n    }, 1000);\n  };\n\n  const emit = (event: string, data?: any) => {\n    if (socketInstance?.connected) {\n      socketInstance.emit(event, data);\n    } else {\n      console.warn('Socket not connected, cannot emit event:', event);\n    }\n  };\n\n  useEffect(() => {\n    if (token) {\n      initializeSocket();\n    } else {\n      disconnect();\n    }\n\n    return () => {\n      disconnect();\n    };\n  }, [token]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      disconnect();\n    };\n  }, []);\n\n  return {\n    socket: socketInstance,\n    isConnected,\n    connectionError,\n    emit,\n    disconnect,\n    reconnect,\n  };\n};\n\n// Utility hook for quest progress updates\nexport const useQuestProgress = () => {\n  const { emit } = useSocket();\n  \n  const updateQuestProgress = (action: string, data?: any) => {\n    emit('quest:update_progress', { action, data });\n  };\n  \n  return { updateQuestProgress };\n};\n\n// Export socket instance for direct access if needed\nexport const getSocketInstance = () => socketInstance;","import { useState, useEffect } from 'react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { useNavigate } from 'react-router-dom';\nimport { \n  Gamepad2, \n  Trophy, \n  Target, \n  Star, \n  Gift, \n  Users, \n  // BarChart3, // Removed unused import\n  Crown,\n  Flame,\n  Award,\n  // Sparkles, // Removed unused import\n  Zap,\n  BookOpen,\n  TrendingUp\n} from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport Navigation from '@/components/Navigation';\nimport GamificationSystem from '@/components/GamificationSystem';\nimport QuestTracker from '@/components/QuestTracker';\nimport GameStats from '@/components/GameStats';\nimport RewardNotification from '@/components/RewardNotification';\nimport LevelUpAnimation from '@/components/LevelUpAnimation';\nimport HappyAvatarSelector from '@/components/HappyAvatarSelector';\nimport { DailyCheckIn } from '@/components/gamification/DailyCheckIn';\nimport { UserStats } from '@/components/gamification/UserStats';\n// import { QuestList } from '@/components/gamification/QuestList'; // Removed unused import\nimport { useSocket } from '@/hooks/useSocket';\nimport { useAuthStore } from '@/stores/authStore';\n\nconst Gamification = () => {\n  const { user } = useAuthStore();\n  const socket = useSocket();\n  const navigate = useNavigate();\n  const [showGamificationSystem, setShowGamificationSystem] = useState(false);\n  const [showAvatarSelector, setShowAvatarSelector] = useState(false);\n  const [showRewardNotification, setShowRewardNotification] = useState(false);\n  const [showLevelUpAnimation, setShowLevelUpAnimation] = useState(false);\n  const [selectedAvatar, setSelectedAvatar] = useState('/api/placeholder/150/150');\n\n  // Demo data for notifications and animations\n  const demoRewards = [\n    {\n      id: '1',\n      type: 'achievement' as const,\n      title: 'First Achievement!',\n      description: 'Selamat! Kamu telah menyelesaikan quest pertama',\n      xp: 100,\n      coins: 50,\n      items: ['Badge Beginner'],\n      rarity: 'common' as const\n    },\n    {\n      id: '2',\n      type: 'quest' as const,\n      title: 'Daily Quest Complete',\n      description: 'Kamu telah menyelesaikan semua quest harian',\n      xp: 200,\n      coins: 100,\n      rarity: 'rare' as const\n    }\n  ];\n\n  useEffect(() => {\n    // Initialize socket connection when component mounts\n    if (user && socket) {\n      console.log('Gamification page loaded with socket connection');\n    }\n  }, [user, socket]);\n\n  // Removed unused handleQuestComplete function\n\n  const demoLevelUpData = {\n    oldLevel: 11,\n    newLevel: 12,\n    xpGained: 350,\n    totalXP: 2450,\n    nextLevelXP: 2800,\n    rewards: {\n      coins: 200,\n      items: ['Avatar Frame Gold', 'Badge Level Master'],\n      unlocks: ['Advanced Quest System', 'Premium Avatar Collection']\n    }\n  };\n\n  // Removed unused features array\n\n  // Removed unused gamificationBenefits array\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-primary/5 to-accent/5\">\n      <Navigation />\n      \n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-24 md:pt-28\">\n        {/* Header */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center mb-12\"\n        >\n          <div className=\"flex items-center justify-center gap-3 mb-4\">\n            <Gamepad2 className=\"h-12 w-12 text-primary\" />\n            <h1 className=\"text-4xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent\">\n              Naik Rank, Kuy!\n            </h1>\n          </div>\n          <p className=\"text-xl text-muted-foreground max-w-3xl mx-auto\">\n            Pengalaman belajar yang menyenangkan dengan sistem reward, achievement, dan kompetisi yang aman dan menarik\n          </p>\n        </motion.div>\n\n        <Tabs defaultValue=\"overview\" className=\"space-y-8\">\n          <TabsList className=\"grid w-full grid-cols-3\">\n              <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n              <TabsTrigger value=\"quests\">Quests</TabsTrigger>\n              <TabsTrigger value=\"achievements\">Achievements</TabsTrigger>\n            </TabsList>\n\n          {/* Overview Tab */}\n          <TabsContent value=\"overview\" className=\"space-y-8\">\n            <div className=\"flex justify-center\">\n              <div className=\"w-full max-w-4xl\">\n                <GameStats showDetailed={true} />\n              </div>\n            </div>\n            \n            {/* Integrated Components */}\n            <div className=\"flex justify-center\">\n              <div className=\"w-full max-w-md\">\n                <DailyCheckIn />\n              </div>\n            </div>\n            \n            <UserStats />\n            \n            {/* Quick Actions - Moved to bottom */}\n            <div className=\"flex justify-center gap-4 mt-8\">\n              <Button \n                onClick={() => navigate('/toko')}\n                className=\"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-3\"\n                size=\"lg\"\n              >\n                <Gift className=\"h-5 w-5 mr-2\" />\n                Buka Toko Reward\n              </Button>\n              <Button \n                onClick={() => setShowAvatarSelector(true)}\n                variant=\"outline\"\n                className=\"px-6 py-3\"\n                size=\"lg\"\n              >\n                😊 Ganti Avatar\n              </Button>\n            </div>\n          </TabsContent>\n\n          {/* Quests Tab */}\n          <TabsContent value=\"quests\" className=\"space-y-8\">\n            <QuestTracker showHeader={true} maxQuests={10} />\n          </TabsContent>\n\n          {/* Achievements Tab */}\n          <TabsContent value=\"achievements\" className=\"space-y-8\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {[\n                {\n                  title: \"First Steps\",\n                  description: \"Selesaikan 10 soal pertama\",\n                  icon: Star,\n                  color: \"text-yellow-500\",\n                  progress: 10,\n                  maxProgress: 10,\n                  completed: true,\n                  reward: \"100 XP + 50 Coins\"\n                },\n                {\n                  title: \"Streak Master\",\n                  description: \"Belajar 7 hari berturut-turut\",\n                  icon: Flame,\n                  color: \"text-orange-500\",\n                  progress: 5,\n                  maxProgress: 7,\n                  completed: false,\n                  reward: \"500 XP + 200 Coins\"\n                },\n                {\n                  title: \"Quiz Champion\",\n                  description: \"Raih skor perfect di 5 quiz\",\n                  icon: Trophy,\n                  color: \"text-purple-500\",\n                  progress: 2,\n                  maxProgress: 5,\n                  completed: false,\n                  reward: \"1000 XP + Avatar Khusus\"\n                },\n                {\n                  title: \"Social Learner\",\n                  description: \"Bergabung dengan 3 study group\",\n                  icon: Users,\n                  color: \"text-blue-500\",\n                  progress: 1,\n                  maxProgress: 3,\n                  completed: false,\n                  reward: \"300 XP + Badge Khusus\"\n                },\n                {\n                  title: \"Speed Runner\",\n                  description: \"Selesaikan try out dalam waktu < 2 jam\",\n                  icon: Zap,\n                  color: \"text-green-500\",\n                  progress: 0,\n                  maxProgress: 1,\n                  completed: false,\n                  reward: \"750 XP + Title Khusus\"\n                },\n                {\n                  title: \"Knowledge Seeker\",\n                  description: \"Baca 50 materi pembelajaran\",\n                  icon: BookOpen,\n                  color: \"text-indigo-500\",\n                  progress: 23,\n                  maxProgress: 50,\n                  completed: false,\n                  reward: \"400 XP + Akses Materi Premium\"\n                },\n                {\n                  title: \"Math Genius\",\n                  description: \"Selesaikan 100 soal matematika\",\n                  icon: Target,\n                  color: \"text-red-500\",\n                  progress: 67,\n                  maxProgress: 100,\n                  completed: false,\n                  reward: \"800 XP + Badge Matematika\"\n                },\n                {\n                  title: \"Early Bird\",\n                  description: \"Belajar sebelum jam 7 pagi selama 5 hari\",\n                  icon: Crown,\n                  color: \"text-amber-500\",\n                  progress: 2,\n                  maxProgress: 5,\n                  completed: false,\n                  reward: \"300 XP + Title Early Bird\"\n                },\n                {\n                  title: \"Night Owl\",\n                  description: \"Belajar setelah jam 10 malam selama 5 hari\",\n                  icon: Star,\n                  color: \"text-purple-400\",\n                  progress: 0,\n                  maxProgress: 5,\n                  completed: false,\n                  reward: \"300 XP + Title Night Owl\"\n                },\n                {\n                  title: \"Perfect Score\",\n                  description: \"Dapatkan nilai 100 di try out\",\n                  icon: Award,\n                  color: \"text-gold-500\",\n                  progress: 0,\n                  maxProgress: 1,\n                  completed: false,\n                  reward: \"2000 XP + Avatar Emas\"\n                },\n                {\n                  title: \"Consistency King\",\n                  description: \"Belajar 30 hari berturut-turut\",\n                  icon: Flame,\n                  color: \"text-red-600\",\n                  progress: 12,\n                  maxProgress: 30,\n                  completed: false,\n                  reward: \"1500 XP + Crown Avatar\"\n                },\n                {\n                  title: \"Question Master\",\n                  description: \"Jawab 500 soal dengan benar\",\n                  icon: Target,\n                  color: \"text-green-600\",\n                  progress: 234,\n                  maxProgress: 500,\n                  completed: false,\n                  reward: \"1200 XP + Badge Master\"\n                },\n                {\n                  title: \"Speed Demon\",\n                  description: \"Selesaikan 10 soal dalam 5 menit\",\n                  icon: Zap,\n                  color: \"text-yellow-400\",\n                  progress: 0,\n                  maxProgress: 1,\n                  completed: false,\n                  reward: \"600 XP + Lightning Badge\"\n                },\n                {\n                  title: \"Comeback Kid\",\n                  description: \"Tingkatkan skor try out sebesar 50 poin\",\n                  icon: TrendingUp,\n                  color: \"text-emerald-500\",\n                  progress: 0,\n                  maxProgress: 1,\n                  completed: false,\n                  reward: \"800 XP + Comeback Badge\"\n                },\n                {\n                  title: \"Study Buddy\",\n                  description: \"Ajak 5 teman bergabung ke platform\",\n                  icon: Users,\n                  color: \"text-pink-500\",\n                  progress: 1,\n                  maxProgress: 5,\n                  completed: false,\n                  reward: \"1000 XP + Referral Badge\"\n                },\n                {\n                  title: \"Bookworm\",\n                  description: \"Baca 100 artikel pembelajaran\",\n                  icon: BookOpen,\n                  color: \"text-brown-500\",\n                  progress: 45,\n                  maxProgress: 100,\n                  completed: false,\n                  reward: \"700 XP + Scholar Badge\"\n                }\n              ].map((achievement, index) => {\n                const IconComponent = achievement.icon;\n                return (\n                  <motion.div\n                    key={achievement.title}\n                    initial={{ opacity: 0, scale: 0.9 }}\n                    animate={{ opacity: 1, scale: 1 }}\n                    transition={{ delay: index * 0.1 }}\n                  >\n                    <Card className={`h-full ${achievement.completed ? 'bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-200' : ''}`}>\n                      <CardContent className=\"p-6\">\n                        <div className=\"flex items-center justify-between mb-4\">\n                          <div className={`p-3 rounded-full ${achievement.completed ? 'bg-yellow-100' : 'bg-gray-100'}`}>\n                            <IconComponent className={`h-6 w-6 ${achievement.color}`} />\n                          </div>\n                          {achievement.completed && (\n                            <Badge className=\"bg-green-100 text-green-800 border-green-200\">\n                              ✓ Completed\n                            </Badge>\n                          )}\n                        </div>\n                        <h3 className=\"text-lg font-semibold mb-2\">{achievement.title}</h3>\n                        <p className=\"text-muted-foreground text-sm mb-4\">{achievement.description}</p>\n                        <div className=\"space-y-2\">\n                          <div className=\"flex justify-between text-sm\">\n                            <span>Progress</span>\n                            <span>{achievement.progress}/{achievement.maxProgress}</span>\n                          </div>\n                          <Progress value={(achievement.progress / achievement.maxProgress) * 100} className=\"h-2\" />\n                        </div>\n                        <div className=\"mt-4 p-3 bg-gray-50 rounded-lg\">\n                          <p className=\"text-xs text-muted-foreground font-medium\">Reward: {achievement.reward}</p>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </motion.div>\n                );\n              })}\n            </div>\n          </TabsContent>\n        </Tabs>\n      </div>\n\n      {/* Modals and Animations */}\n      <GamificationSystem \n        isOpen={showGamificationSystem} \n        onClose={() => setShowGamificationSystem(false)} \n      />\n      \n      <HappyAvatarSelector\n        isOpen={showAvatarSelector}\n        onClose={() => setShowAvatarSelector(false)}\n        onSelect={(avatarUrl) => {\n          setSelectedAvatar(avatarUrl);\n          setShowAvatarSelector(false);\n        }}\n        currentAvatar={selectedAvatar}\n      />\n      \n      {showRewardNotification && (\n        <RewardNotification\n          rewards={demoRewards}\n          onClose={(rewardId) => {\n            console.log(`Closed reward: ${rewardId}`);\n            if (demoRewards.length === 1) {\n              setShowRewardNotification(false);\n            }\n          }}\n          onClaimAll={() => setShowRewardNotification(false)}\n        />\n      )}\n      \n      <LevelUpAnimation\n        isVisible={showLevelUpAnimation}\n        levelData={demoLevelUpData}\n        onClose={() => setShowLevelUpAnimation(false)}\n      />\n    </div>\n  );\n};\n\nexport default Gamification;"],"names":["GameStats","className","showDetailed","basicStats","label","value","icon","Crown","color","bgColor","change","trend","Star","Flame","jsx","detailedStats","category","BookOpen","stats","Target","Clock","TrendingUp","Trophy","Award","Medal","BarChart3","Users","children","Zap","Calendar","getTrendIcon","getTrendColor","jsxs","map","stat","index","IconComponent","motion","div","initial","opacity","scale","animate","transition","delay","Card","CardContent","Badge","variant","categoryIndex","CategoryIcon","y","CardHeader","CardTitle","statIndex","StatIcon","x","Progress","RewardNotification","rewards","onClose","onClaimAll","visibleRewards","setVisibleRewards","useState","useEffect","forEach","reward","setTimeout","prev","getRarityColor","rarity","getRarityBorder","getTypeColor","type","handleCloseReward","rewardId","filter","r","id","length","AnimatePresence","CustomIcon","Gift","getTypeIcon","exit","stiffness","damping","Array","_","i","Math","random","duration","repeat","Infinity","repeatDelay","style","left","top","Sparkles","Button","size","onClick","X","rotate","toUpperCase","h3","title","p","description","xp","coins","items","item","itemIndex","LevelUpAnimation","isVisible","levelData","animationPhase","setAnimationPhase","showRewards","setShowRewards","timeouts","clearTimeout","progressPercentage","totalXP","nextLevelXP","oldLevel","ArrowUp","newLevel","xpGained","width","unlocks","unlock","UserStats","setStats","loading","setLoading","user","useAuthStore","fetchUserStats","async","response","fetch","headers","getAuthHeaders","ok","data","json","level","xpToNextLevel","dailyStreak","totalStudyTime","achievements","questsCompleted","totalQuests","error","getXPProgress","toLocaleString","Coins","minutes","hours","floor","mins","formatStudyTime","CardDescription","round","slice","achievement","PACKET_TYPES","Object","create","PACKET_TYPES_REVERSE","keys","key","ERROR_PACKET","withNativeBlob","Blob","prototype","toString","call","withNativeArrayBuffer","ArrayBuffer","isView","obj","buffer","encodePacket","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","onload","content","result","split","readAsDataURL","toArray","Uint8Array","byteOffset","byteLength","TEXT_ENCODER","chars","lookup","charCodeAt","decodePacket","encodedPacket","binaryType","mapBinary","charAt","decodeBase64Packet","substring","decoded","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","len","arraybuffer","bytes","decode","SEPARATOR","String","fromCharCode","createPacketEncoderStream","TransformStream","transform","packet","controller","arrayBuffer","then","encoded","TextEncoder","encode","encodePacketToBinary","payloadLength","header","DataView","setUint8","view","setUint16","setBigUint64","BigInt","enqueue","TEXT_DECODER","totalLength","chunks","reduce","acc","chunk","concatChunks","shift","j","Emitter","mixin","on","addEventListener","event","fn","this","_callbacks","push","once","off","apply","arguments","removeListener","removeAllListeners","removeEventListener","cb","callbacks","splice","emit","args","emitReserved","listeners","hasListeners","nextTick","Promise","resolve","setTimeoutFn","globalThisShim","self","window","Function","pick","attr","k","hasOwnProperty","NATIVE_SET_TIMEOUT","globalThis","NATIVE_CLEAR_TIMEOUT","installTimerFunctions","opts","useNativeTimers","bind","clearTimeoutFn","str","c","l","utf8Length","ceil","randomString","Date","now","TransportError","Error","constructor","reason","context","super","Transport","writable","query","socket","forceBase64","onError","open","readyState","doOpen","close","doClose","send","packets","write","onOpen","onData","onPacket","details","pause","onPause","createUri","schema","_hostname","_port","path","_query","hostname","indexOf","port","secure","Number","encodedQuery","encodeURIComponent","Polling","_polling","name","_poll","total","doPoll","encodedPayload","encodedPackets","decodedPacket","decodePayload","count","join","encodePayload","doWrite","uri","timestampRequests","timestampParam","sid","b64","XMLHttpRequest","err","hasCORS","empty","BaseXHR","location","isSSL","protocol","xd","req","request","method","xhrStatus","pollXhr","Request","createRequest","_opts","_method","_uri","_data","_create","_a","xdomain","xhr","_xhr","extraHeaders","setDisableHeaderCheck","setRequestHeader","e","cookieJar","addCookies","withCredentials","requestTimeout","timeout","onreadystatechange","parseCookies","getResponseHeader","status","_onLoad","_onError","document","_index","requestsCount","requests","_cleanup","fromError","abort","responseText","attachEvent","unloadHandler","hasXHR2","newRequest","responseType","concat","isReactNative","navigator","product","toLowerCase","BaseWS","protocols","ws","createSocket","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","onmessage","ev","onerror","lastPacket","WebSocketCtor","WebSocket","MozWebSocket","transports","websocket","_packet","webtransport","_transport","WebTransport","transportOptions","closed","catch","ready","createBidirectionalStream","stream","decoderStream","maxPayload","TextDecoder","state","expectedLength","isBinary","headerArray","getUint16","n","getUint32","pow","createPacketDecoderStream","MAX_SAFE_INTEGER","reader","readable","pipeThrough","getReader","encoderStream","pipeTo","_writer","getWriter","read","done","polling","assign","re","parts","parse","src","b","replace","m","exec","source","host","authority","ipv6uri","pathNames","regx","names","queryKey","$0","$1","$2","withEventListeners","OFFLINE_EVENT_LISTENERS","listener","SocketWithoutUpgrade","writeBuffer","_prevBufferLen","_pingInterval","_pingTimeout","_maxPayload","_pingTimeoutTime","parsedUri","_transportsByName","t","transportName","agent","upgrade","rememberUpgrade","addTrailingSlash","rejectUnauthorized","perMessageDeflate","threshold","closeOnBeforeunload","qs","qry","pairs","pair","decodeURIComponent","_beforeunloadEventListener","transport","_offlineEventListener","_onClose","_cookieJar","createCookieJar","_open","createTransport","EIO","priorWebsocketSuccess","setTransport","_onDrain","_onPacket","flush","onHandshake","JSON","_sendPacket","_resetPingTimeout","code","pingInterval","pingTimeout","_pingTimeoutTimer","upgrading","_getWritablePackets","payloadSize","_hasPingExpired","hasExpired","msg","options","compress","cleanupAndClose","waitForUpgrade","tryAllTransports","SocketWithUpgrade","_upgrades","_probe","failed","onTransportOpen","cleanup","freezeTransport","onTransportClose","onupgrade","to","_filterUpgrades","upgrades","filteredUpgrades","o","DEFAULT_TRANSPORTS","withNativeFile","File","hasBinary","toJSON","isArray","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","num","newData","reconstructPacket","_reconstructPacket","RESERVED_EVENTS","PacketType","isObject","Decoder","reviver","add","reconstructor","decodeString","isBinaryEvent","BINARY_EVENT","BINARY_ACK","EVENT","ACK","BinaryReconstructor","takeBinaryData","start","buf","nsp","next","payload","tryParse","substr","isPayloadValid","CONNECT","DISCONNECT","CONNECT_ERROR","destroy","finishedReconstruction","reconPack","binData","replacer","encodeAsString","encodeAsBinary","stringify","deconstruction","unshift","freeze","connect","connect_error","disconnect","disconnecting","newListener","Socket","io","connected","recovered","receiveBuffer","sendBuffer","_queue","_queueSeq","ids","acks","flags","auth","_autoConnect","disconnected","subEvents","subs","onpacket","active","_readyState","_b","_c","retries","fromQueue","volatile","_addToQueue","ack","pop","_registerAckCallback","isTransportWritable","engine","isConnected","notifyOutgoingListeners","ackTimeout","timer","withError","emitWithAck","reject","arg1","arg2","tryCount","pending","responseArgs","_drainQueue","force","_sendConnectPacket","_pid","pid","offset","_lastOffset","_clearAcks","some","onconnect","onevent","onack","ondisconnect","message","emitEvent","_anyListeners","sent","emitBuffered","subDestroy","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","Backoff","ms","min","max","factor","jitter","attempts","rand","deviation","reset","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","parser","encoder","Encoder","decoder","autoConnect","v","_reconnection","skipReconnect","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","Engine","openSubDestroy","errorSub","onping","ondata","ondecoded","_destroy","_close","onreconnect","attempt","cache","parsed","loc","test","href","url","sameNamespace","forceNew","multiplex","socketInstance","Gamification","token","updateUserStats","setIsConnected","connectionError","setConnectionError","reconnectTimeoutRef","useRef","reconnectAttemptsRef","initializeSocket","current","toast","success","userStats","questTitle","completed","progress","target","info","useSocket","navigate","useNavigate","showGamificationSystem","setShowGamificationSystem","showAvatarSelector","setShowAvatarSelector","showRewardNotification","setShowRewardNotification","showLevelUpAnimation","setShowLevelUpAnimation","selectedAvatar","setSelectedAvatar","demoRewards","Navigation","Gamepad2","Tabs","defaultValue","TabsList","TabsTrigger","TabsContent","DailyCheckIn","QuestTracker","showHeader","maxQuests","maxProgress","GamificationSystem","isOpen","HappyAvatarSelector","onSelect","avatarUrl","currentAvatar"],"mappings":"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","x_google_ignoreList":[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]}