import{j as e,u as s,d as a,i as n,F as t,ar as l,av as i,p as r,a8 as d,w as c,ax as o}from"./ui-vendor-BwAhdcts.js";import{r as u}from"./router-vendor-xnFU-SGQ.js";import{j as h,l as m,P as x,i as j,k as p,m as k,n as g,C as b,b as v,c as f,a as _,B as N}from"./index-CImf8UwA.js";import{I as C}from"./input-B1kw1Jk2.js";import{L as y}from"./label-BTUyfD56.js";import{T as w}from"./textarea-DC0W3P3Y.js";import{B as S}from"./badge-Def1q0WS.js";import{u as P}from"./index-LkZ9e_wI.js";import{S as B,a as I,b as T,c as D,d as L}from"./select-DdYKYt_5.js";import{D as R,a as E,b as F,c as M}from"./dialog-BRvuyna5.js";import{T as K,a as O,b as q,c as U,d as z,e as H}from"./table-DUY_Eslo.js";import{A as W}from"./AdminNavigation-FwahpWK3.js";import{d as J}from"./dummySoal-DZB364dP.js";import"./react-vendor-DEQ385Nk.js";import"./supabase-vendor-Bj79fh9f.js";import"./index-jVOyRz7F.js";var A="Checkbox",[V,X]=h(A),[Y,$]=V(A);function Z(s){const{__scopeCheckbox:a,checked:n,children:t,defaultChecked:l,disabled:i,form:r,name:d,onCheckedChange:c,required:o,value:h="on",internal_do_not_use_render:m}=s,[x,p]=j({prop:n,defaultProp:l??!1,onChange:c,caller:A}),[k,g]=u.useState(null),[b,v]=u.useState(null),f=u.useRef(!1),_=!k||(!!r||!!k.closest("form")),N={checked:x,disabled:i,setChecked:p,control:k,setControl:g,name:d,form:r,value:h,hasConsumerStoppedPropagationRef:f,required:o,defaultChecked:!ie(l)&&l,isFormControl:_,bubbleInput:b,setBubbleInput:v};return e.jsx(Y,{scope:a,...N,children:le(m)?m(N):t})}var G="CheckboxTrigger",Q=u.forwardRef(({__scopeCheckbox:a,onKeyDown:n,onClick:t,...l},i)=>{const{control:r,value:d,disabled:c,checked:o,required:h,setControl:m,setChecked:j,hasConsumerStoppedPropagationRef:k,isFormControl:g,bubbleInput:b}=$(G,a),v=s(i,m),f=u.useRef(o);return u.useEffect(()=>{const e=null==r?void 0:r.form;if(e){const s=()=>j(f.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[r,j]),e.jsx(x.button,{type:"button",role:"checkbox","aria-checked":ie(o)?"mixed":o,"aria-required":h,"data-state":re(o),"data-disabled":c?"":void 0,disabled:c,value:d,...l,ref:v,onKeyDown:p(n,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:p(t,e=>{j(e=>!!ie(e)||!e),b&&g&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})})});Q.displayName=G;var ee=u.forwardRef((s,a)=>{const{__scopeCheckbox:n,name:t,checked:l,defaultChecked:i,required:r,disabled:d,value:c,onCheckedChange:o,form:u,...h}=s;return e.jsx(Z,{__scopeCheckbox:n,checked:l,defaultChecked:i,disabled:d,required:r,onCheckedChange:o,name:t,form:u,value:c,internal_do_not_use_render:({isFormControl:s})=>e.jsxs(e.Fragment,{children:[e.jsx(Q,{...h,ref:a,__scopeCheckbox:n}),s&&e.jsx(te,{__scopeCheckbox:n})]})})});ee.displayName=A;var se="CheckboxIndicator",ae=u.forwardRef((s,a)=>{const{__scopeCheckbox:n,forceMount:t,...l}=s,i=$(se,n);return e.jsx(m,{present:t||ie(i.checked)||!0===i.checked,children:e.jsx(x.span,{"data-state":re(i.checked),"data-disabled":i.disabled?"":void 0,...l,ref:a,style:{pointerEvents:"none",...s.style}})})});ae.displayName=se;var ne="CheckboxBubbleInput",te=u.forwardRef(({__scopeCheckbox:a,...n},t)=>{const{control:l,hasConsumerStoppedPropagationRef:i,checked:r,defaultChecked:d,required:c,disabled:o,name:h,value:m,form:j,bubbleInput:p,setBubbleInput:g}=$(ne,a),b=s(t,g),v=P(r),f=k(l);u.useEffect(()=>{const e=p;if(!e)return;const s=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(s,"checked").set,n=!i.current;if(v!==r&&a){const s=new Event("click",{bubbles:n});e.indeterminate=ie(r),a.call(e,!ie(r)&&r),e.dispatchEvent(s)}},[p,v,r,i]);const _=u.useRef(!ie(r)&&r);return e.jsx(x.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??_.current,required:c,disabled:o,name:h,value:m,form:j,...n,tabIndex:-1,ref:b,style:{...n.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function le(e){return"function"==typeof e}function ie(e){return"indeterminate"===e}function re(e){return ie(e)?"indeterminate":e?"checked":"unchecked"}te.displayName=ne;const de=u.forwardRef(({className:s,...n},t)=>e.jsx(ee,{ref:t,className:g("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...n,children:e.jsx(ae,{className:g("flex items-center justify-center text-current"),children:e.jsx(a,{className:"h-4 w-4"})})}));de.displayName=ee.displayName;const ce=J,oe=["Penalaran Umum","Pengetahuan & Pemahaman Umum","Pemahaman Bacaan & Menulis","Pengetahuan Kuantitatif","Literasi B. Indonesia","Literasi B. Inggris","Penalaran Matematika"],ue=()=>{var s;const[a,h]=u.useState({id:"",judul:"",deskripsi:"",tingkat_kesulitan:"Campuran"}),[m,x]=u.useState([]),[j,p]=u.useState(!1),[k,g]=u.useState(null),[P,J]=u.useState([]),[A,V]=u.useState("all"),[X,Y]=u.useState(""),$=ce.filter(e=>{const s="all"===A||e.subtest===A,a=e.pertanyaan.toLowerCase().includes(X.toLowerCase())||e.id.toLowerCase().includes(X.toLowerCase());return s&&a}),Z=(e,s,a)=>{var n,t;const l=[...m];l[e]={...l[e],[s]:a,soal_ids:(null==(n=l[e])?void 0:n.soal_ids)||[],subtests_included:(null==(t=l[e])?void 0:t.subtests_included)||[]},x(l)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(W,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Manajemen Try Out SNBT"}),e.jsx("p",{className:"text-gray-600",children:"Buat dan kelola paket simulasi UTBK-SNBT dengan sistem blok pengerjaan"})]}),e.jsxs(b,{className:"mb-8",children:[e.jsx(v,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5"}),"Informasi Paket Try Out"]})}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"package-id",children:"ID Paket *"}),e.jsx(C,{id:"package-id",placeholder:"Contoh: SNBT-SIM-01",value:a.id,onChange:e=>h(s=>({...s,id:e.target.value}))})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"package-title",children:"Judul Paket *"}),e.jsx(C,{id:"package-title",placeholder:"Contoh: Simulasi UTBK-SNBT Premium #1",value:a.judul,onChange:e=>h(s=>({...s,judul:e.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"package-description",children:"Deskripsi"}),e.jsx(w,{id:"package-description",placeholder:"Deskripsi singkat tentang paket try out ini...",value:a.deskripsi,onChange:e=>h(s=>({...s,deskripsi:e.target.value}))})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"difficulty",children:"Tingkat Kesulitan"}),e.jsxs(B,{value:a.tingkat_kesulitan,onValueChange:e=>h(s=>({...s,tingkat_kesulitan:e})),children:[e.jsx(I,{children:e.jsx(T,{})}),e.jsxs(D,{children:[e.jsx(L,{value:"Mudah",children:"Mudah"}),e.jsx(L,{value:"Sedang",children:"Sedang"}),e.jsx(L,{value:"Sulit",children:"Sulit"}),e.jsx(L,{value:"Campuran",children:"Campuran"})]})]})]})]})]}),e.jsxs(b,{className:"mb-8",children:[e.jsx(v,{children:e.jsxs(f,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{className:"h-5 w-5"}),"Blok Pengerjaan (",m.length,")"]}),e.jsxs(N,{onClick:()=>{const e={urutan:m.length+1,nama_block:"",deskripsi:"",waktu_pengerjaan_menit:0,soal_ids:[],instruksi_khusus:"",break_setelah_blok:0,subtests_included:[]};x([...m,e])},className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-4 w-4"}),"Tambah Blok Pengerjaan"]})]})}),e.jsx(_,{children:0===m.length?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(t,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:'Belum ada blok pengerjaan. Klik "Tambah Blok Pengerjaan" untuk memulai.'})]}):e.jsx("div",{className:"space-y-6",children:m.map((s,a)=>e.jsxs(b,{className:"border-l-4 border-l-blue-500",children:[e.jsx(v,{children:e.jsxs(f,{className:"flex items-center justify-between text-lg",children:[e.jsxs("span",{children:["Blok ",s.urutan]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>(e=>{const s=m.filter((s,a)=>a!==e).map((e,s)=>({...e,urutan:s+1}));x(s)})(a),className:"text-red-600 hover:text-red-700",children:e.jsx(i,{className:"h-4 w-4"})})]})}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Urutan Blok"}),e.jsx(C,{type:"number",value:s.urutan,onChange:e=>Z(a,"urutan",parseInt(e.target.value)||1),min:"1"})]}),e.jsxs("div",{children:[e.jsx(y,{children:"Nama Blok *"}),e.jsx(C,{placeholder:"Contoh: TPS atau Literasi & Penalaran Matematika",value:s.nama_block,onChange:e=>Z(a,"nama_block",e.target.value)})]}),e.jsxs("div",{children:[e.jsx(y,{children:"Waktu Pengerjaan (menit) *"}),e.jsx(C,{type:"number",value:s.waktu_pengerjaan_menit,onChange:e=>Z(a,"waktu_pengerjaan_menit",parseInt(e.target.value)||0),min:"1"})]})]}),e.jsxs("div",{children:[e.jsx(y,{children:"Deskripsi Blok"}),e.jsx(w,{placeholder:"Deskripsi singkat tentang blok ini...",value:s.deskripsi,onChange:e=>Z(a,"deskripsi",e.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Instruksi Khusus"}),e.jsx(w,{placeholder:"Instruksi khusus untuk blok ini...",value:s.instruksi_khusus,onChange:e=>Z(a,"instruksi_khusus",e.target.value)})]}),e.jsxs("div",{children:[e.jsx(y,{children:"Waktu Istirahat Setelah Blok (menit)"}),e.jsx(C,{type:"number",value:s.break_setelah_blok,onChange:e=>Z(a,"break_setelah_blok",parseInt(e.target.value)||0),min:"0"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Soal dalam Blok"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.soal_ids.length," soal dipilih",s.subtests_included.length>0&&e.jsxs("span",{className:"ml-2",children:["• Subtest: ",s.subtests_included.join(", ")]})]})]}),e.jsxs(N,{variant:"outline",onClick:()=>{return g(e=a),J((null==(s=m[e])?void 0:s.soal_ids)||[]),void p(!0);var e,s},className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-4 w-4"}),"Pilih Soal"]})]}),s.soal_ids.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:s.soal_ids.map(s=>{const a=ce.find(e=>e.id===s);return a?e.jsxs(S,{variant:"secondary",className:"text-xs",children:[a.id," - ",a.subtest]},s):null})})]})]})]},a))})})]}),e.jsxs(b,{children:[e.jsx(v,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-5 w-5"}),"Ringkasan Paket"]})}),e.jsxs(_,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Blok"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.reduce((e,s)=>e+s.soal_ids.length,0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Soal"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600 flex items-center justify-center gap-1",children:[e.jsx(c,{className:"h-5 w-5"}),m.reduce((e,s)=>e+s.waktu_pengerjaan_menit,0)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Waktu (menit)"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:m.reduce((e,s)=>e+(s.break_setelah_blok||0),0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Istirahat (menit)"})]})]}),e.jsxs(N,{onClick:()=>{if(!a.id||!a.judul)return void alert("ID dan Judul paket harus diisi!");if(0===m.length)return void alert("Minimal harus ada satu blok pengerjaan!");for(let e=0;e<m.length;e++){const s=m[e];if(!(null==s?void 0:s.nama_block)||((null==s?void 0:s.waktu_pengerjaan_menit)||0)<=0)return void alert(`Blok ${e+1}: Nama blok dan waktu pengerjaan harus diisi dengan benar!`);if(0===((null==s?void 0:s.soal_ids)||[]).length)return void alert(`Blok ${e+1}: Harus memilih minimal satu soal!`)}m.reduce((e,s)=>e+s.waktu_pengerjaan_menit,0),m.reduce((e,s)=>e+s.soal_ids.length,0),a.id,a.judul,a.deskripsi,m.map(e=>({urutan:e.urutan,nama_block:e.nama_block,deskripsi:e.deskripsi,waktu_pengerjaan_menit:e.waktu_pengerjaan_menit,soal_ids:e.soal_ids,instruksi_khusus:e.instruksi_khusus||"",break_setelah_blok:e.break_setelah_blok||0,subtests_included:e.subtests_included})),a.tingkat_kesulitan,(new Date).getFullYear();alert("Paket Try Out berhasil disimpan! Lihat console untuk detail struktur data.")},className:"w-full flex items-center justify-center gap-2",size:"lg",children:[e.jsx(o,{className:"h-5 w-5"}),"Simpan Paket Try Out"]})]})]})]}),e.jsx(R,{open:j,onOpenChange:p,children:e.jsxs(E,{className:"max-w-6xl max-h-[80vh] overflow-hidden",children:[e.jsx(F,{children:e.jsxs(M,{children:["Pilih Soal untuk Blok ",null!==k?null==(s=m[k])?void 0:s.urutan:""]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(C,{placeholder:"Cari soal berdasarkan ID atau pertanyaan...",value:X,onChange:e=>Y(e.target.value),className:"w-full"})}),e.jsxs(B,{value:A,onValueChange:V,children:[e.jsx(I,{className:"w-64",children:e.jsx(T,{placeholder:"Filter Subtest"})}),e.jsxs(D,{children:[e.jsx(L,{value:"all",children:"Semua Subtest"}),oe.map(s=>e.jsx(L,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium",children:[P.length," soal dipilih dari ",$.length," soal tersedia"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>J([]),children:"Hapus Semua"}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>J($.map(e=>e.id)),children:"Pilih Semua"})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden max-h-96 overflow-y-auto",children:e.jsxs(K,{children:[e.jsx(O,{children:e.jsxs(q,{children:[e.jsx(U,{className:"w-12",children:"Pilih"}),e.jsx(U,{children:"ID Soal"}),e.jsx(U,{children:"Subtest"}),e.jsx(U,{children:"Pertanyaan"}),e.jsx(U,{children:"Kesulitan"}),e.jsx(U,{children:"Waktu (detik)"})]})}),e.jsx(z,{children:$.map(s=>e.jsxs(q,{children:[e.jsx(H,{children:e.jsx(de,{checked:P.includes(s.id),onCheckedChange:()=>{return e=s.id,void J(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e]);var e}})}),e.jsx(H,{className:"font-mono text-sm",children:s.id}),e.jsx(H,{children:e.jsx(S,{variant:"outline",className:"text-xs",children:s.subtest})}),e.jsx(H,{className:"max-w-md truncate",children:s.pertanyaan}),e.jsx(H,{children:e.jsx(S,{variant:"HOTS"===s.tingkat_kesulitan?"destructive":"secondary",className:"text-xs",children:s.tingkat_kesulitan})}),e.jsxs(H,{children:[s.waktu_pengerjaan_detik,"s"]})]},s.id))})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(N,{variant:"outline",onClick:()=>p(!1),children:"Batal"}),e.jsxs(N,{onClick:()=>{if(null!==k){const e=ce.filter(e=>P.includes(e.id)),s=[...new Set(e.map(e=>e.subtest))];Z(k,"soal_ids",P),Z(k,"subtests_included",s)}p(!1),g(null)},children:["Simpan Pilihan (",P.length," soal)"]})]})]})]})})]})};export{ue as default};
//# sourceMappingURL=TryoutManagement-DuMD6sls.js.map
