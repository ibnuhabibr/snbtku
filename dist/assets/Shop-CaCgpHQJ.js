import{j as a,h as e,q as r,Z as s,m as i,aj as t,ak as n,A as o,N as c,ae as l,a6 as d,al as m,t as p,z as g,o as u,l as h,am as y,w as b,E as x}from"./ui-vendor-BwAhdcts.js";import{r as v,R as j}from"./router-vendor-xnFU-SGQ.js";import{u as k,e as f,N as w,w as N,C,a as B,B as S}from"./index-CImf8UwA.js";import{B as A}from"./badge-Def1q0WS.js";import{T as P,a as T,b as M,c as W}from"./tabs-2oAGv6oB.js";import{m as D}from"./proxy-GZF3NXPi.js";import"./react-vendor-DEQ385Nk.js";import"./supabase-vendor-Bj79fh9f.js";const H=()=>{const{user:H,updateUserStats:I}=k(),{toast:z}=f(),[E,G]=v.useState([]),[L,K]=v.useState([]),[$,q]=v.useState(!1),[F,O]=v.useState(null),R=(null==H?void 0:H.coins)||0;v.useEffect(()=>{H&&0===E.length&&(async()=>{try{q(!0);try{const a=await N.get("/shop/items");G(a.data.items||[]);const e=await N.get("/shop/inventory");K(e.data.purchasedItems||[])}catch(a){G(X()),K([])}}catch(e){G(X()),K([])}finally{q(!1)}})()},[H,E.length]);const X=()=>[{id:"50",name:"🕷️ Spiderman",category:"avatar",price:800,rarity:"epic",description:"Avatar Spiderman dengan kostum merah-biru ikonik",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=Spiderman&mood=happy&eyes=happy&mouth=smile&skinColor=fdbcb4&hairColor=red&clothingColor=ff0000&accessoriesChance=100"},{id:"51",name:"🦇 Batman",category:"avatar",price:850,rarity:"epic",description:"Avatar Batman dengan jubah hitam legendaris",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=Batman&mood=happy&eyes=happy&mouth=smile&skinColor=fdbcb4&hairColor=black&clothingColor=000000&accessoriesChance=100"},{id:"52",name:"🦸‍♂️ Superman",category:"avatar",price:900,rarity:"epic",description:"Avatar Superman dengan logo S di dada",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=Superman&mood=happy&eyes=happy&mouth=smile&skinColor=fdbcb4&hairColor=black&clothingColor=0066cc&accessoriesChance=100"},{id:"53",name:"🤖 Iron Man",category:"avatar",price:950,rarity:"epic",description:"Avatar Iron Man dengan armor teknologi tinggi",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=IronMan&mood=happy&eyes=happy&mouth=smile&skinColor=fdbcb4&hairColor=brown&clothingColor=cc0000&accessoriesChance=100"},{id:"54",name:"👸 Wonder Woman",category:"avatar",price:800,rarity:"epic",description:"Avatar Wonder Woman dengan tiara emas",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=WonderWoman&mood=happy&eyes=happy&mouth=smile&skinColor=fdbcb4&hairColor=black&clothingColor=cc0000&accessoriesChance=100"},{id:"55",name:"🛡️ Captain America",category:"avatar",price:850,rarity:"epic",description:"Avatar Captain America dengan perisai vibranium",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=CaptainAmerica&mood=happy&eyes=happy&mouth=smile&skinColor=fdbcb4&hairColor=blonde&clothingColor=0066cc&accessoriesChance=100"},{id:"56",name:"⚡ Thor",category:"avatar",price:1e3,rarity:"legendary",description:"Avatar Thor dengan palu Mjolnir",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=Thor&mood=happy&eyes=happy&mouth=smile&skinColor=fdbcb4&hairColor=blonde&clothingColor=cc0000&accessoriesChance=100"},{id:"57",name:"💚 Hulk",category:"avatar",price:900,rarity:"epic",description:"Avatar Hulk dengan kekuatan super",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=Hulk&mood=happy&eyes=happy&mouth=smile&skinColor=00cc00&hairColor=black&clothingColor=663399&accessoriesChance=100"},{id:"58",name:"🐾 Black Panther",category:"avatar",price:950,rarity:"epic",description:"Avatar Black Panther dari Wakanda",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=BlackPanther&mood=happy&eyes=happy&mouth=smile&skinColor=ae5d29&hairColor=black&clothingColor=000000&accessoriesChance=100"},{id:"59",name:"🔮 Doctor Strange",category:"avatar",price:1200,rarity:"legendary",description:"Avatar Doctor Strange dengan mantel levitasi",url:"https://api.dicebear.com/7.x/avataaars/svg?seed=DoctorStrange&mood=happy&eyes=happy&mouth=smile&skinColor=fdbcb4&hairColor=black&clothingColor=663399&accessoriesChance=100"},{id:"11",name:"Double XP",category:"powerup",price:50,rarity:"common",description:"Gandakan XP selama 1 jam"},{id:"12",name:"Coin Booster",category:"powerup",price:75,rarity:"common",description:"Tambahan 50% koin selama 2 jam"},{id:"13",name:"Time Freeze",category:"powerup",price:100,rarity:"rare",description:"Bekukan waktu quiz selama 30 detik"},{id:"14",name:"Hint Master",category:"powerup",price:80,rarity:"common",description:"3 hint gratis untuk quiz"},{id:"15",name:"Lucky Charm",category:"powerup",price:150,rarity:"rare",description:"Peluang jawaban benar +20%"},{id:"16",name:"Energy Drink",category:"powerup",price:60,rarity:"common",description:"Pulihkan semua energi"},{id:"17",name:"Mega Boost",category:"powerup",price:200,rarity:"legendary",description:"Triple XP dan koin selama 1 jam"},{id:"18",name:"Shield Protection",category:"powerup",price:120,rarity:"rare",description:"Lindungi streak dari 1 kesalahan"},{id:"19",name:"Speed Boost",category:"powerup",price:90,rarity:"common",description:"Kecepatan berpikir +30%"},{id:"20",name:"Focus Potion",category:"powerup",price:110,rarity:"rare",description:"Konsentrasi maksimal selama 2 jam"},{id:"21",name:"Badge Pemula",category:"badge",price:25,rarity:"common",description:"Badge untuk pemula yang bersemangat"},{id:"22",name:"Badge Matematika",category:"badge",price:150,rarity:"rare",description:"Badge master matematika"},{id:"23",name:"Badge Bahasa",category:"badge",price:150,rarity:"rare",description:"Badge ahli bahasa Indonesia"},{id:"24",name:"Badge Sains",category:"badge",price:150,rarity:"rare",description:"Badge ilmuwan muda"},{id:"25",name:"Badge Logika",category:"badge",price:200,rarity:"rare",description:"Badge master logika"},{id:"26",name:"Badge Champion",category:"badge",price:500,rarity:"legendary",description:"Badge juara sejati"},{id:"27",name:"Badge Genius",category:"badge",price:750,rarity:"legendary",description:"Badge untuk jenius"},{id:"28",name:"Badge Warrior",category:"badge",price:300,rarity:"rare",description:"Badge pejuang tangguh"},{id:"29",name:"Badge Scholar",category:"badge",price:400,rarity:"rare",description:"Badge cendekiawan"},{id:"30",name:"Badge Legend",category:"badge",price:1e3,rarity:"legendary",description:"Badge legenda yang langka"}],Z=v.useMemo(()=>({avatars:E.filter(a=>"avatar"===a.category),powerups:E.filter(a=>"powerup"===a.category),badges:E.filter(a=>"badge"===a.category)}),[E]),U=a=>{switch(a){case"common":default:return"bg-gray-100 text-gray-800 border-gray-200";case"rare":return"bg-blue-100 text-blue-800 border-blue-200";case"legendary":return"bg-purple-100 text-purple-800 border-purple-200"}},V=(e,v)=>$?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,r)=>a.jsx(C,{className:"h-full",children:a.jsx(B,{className:"p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),a.jsx("div",{className:"h-16 bg-gray-200 rounded mb-4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded mb-4"}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"}),a.jsx("div",{className:"h-8 bg-gray-200 rounded w-20"})]})]})})},r))}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,k)=>{const f=L.includes(e.id),w=R>=e.price,P=F===e.id;return a.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*k},children:a.jsx(C,{className:"h-full transition-all duration-300 hover:shadow-lg "+(f?"bg-green-50 border-green-200":""),children:a.jsxs(B,{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx(A,{className:U(e.rarity),children:e.rarity}),f&&a.jsx(A,{className:"bg-green-100 text-green-800 border-green-200",children:"✓ Owned"})]}),a.jsxs("div",{className:"text-center mb-4",children:["avatars"===v&&a.jsx("div",{className:"text-4xl mb-2",children:e.image}),("powerups"===v||"badges"===v)&&a.jsx("div",{className:"p-4 bg-gray-100 rounded-full w-fit mx-auto mb-2",children:j.createElement((T=e.icon,{Zap:s,Shield:x,Clock:b,Bolt:y,Target:h,Heart:u,Rocket:g,Star:p,Gem:m,Crown:d,Trophy:i,Sparkles:l,Flame:c,Award:o,Diamond:n,Sword:t}[T]||i),{className:"h-8 w-8 "+("powerups"===v?"text-blue-500":"text-yellow-500")})})]}),a.jsx("h3",{className:"text-lg font-semibold mb-2 text-center",children:e.name}),a.jsx("p",{className:"text-muted-foreground text-sm text-center mb-4",children:e.description}),e.duration&&a.jsxs("p",{className:"text-xs text-center text-blue-600 mb-4",children:["Durasi: ",e.duration]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(r,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"font-semibold text-yellow-600",children:e.price})]}),a.jsx(S,{size:"sm",disabled:f||!w||P,onClick:()=>(async(a,e)=>{if(!(F||R<e||L.includes(a)))if(R<e)z({title:"Koin Tidak Cukup",description:`Anda membutuhkan ${e-R} koin lagi untuk membeli item ini.`,variant:"destructive"});else try{O(a);try{const e=await N.post(`/shop/purchase/${a}`);e.data.success&&(K(e=>[...e,a]),I({coins:e.data.newCoins}),z({title:"Pembelian Berhasil!",description:`Anda telah berhasil membeli ${e.data.item.name}`}))}catch(r){await new Promise(a=>setTimeout(a,1e3));const s=E.find(e=>e.id===a);K(e=>[...e,a]),I({coins:R-e}),z({title:"Pembelian Berhasil!",description:`Anda telah berhasil membeli ${(null==s?void 0:s.name)||"item"}`})}}catch(s){z({title:"Pembelian Gagal",description:"Gagal membeli item. Silakan coba lagi.",variant:"destructive"})}finally{O(null)}})(e.id,e.price),className:f?"bg-green-500 hover:bg-green-600":"",children:P?"Buying...":f?"Owned":w?"Buy":"Not enough coins"})]})]})})},e.id);var T})});return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 no-blink",children:[a.jsx(w,{}),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs(D.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},className:"flex items-center justify-center gap-3 mb-4 will-change-transform",children:[a.jsx(e,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Toko Rewards"})]}),a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx(r,{className:"h-6 w-6 text-yellow-500"}),a.jsx("span",{className:"text-2xl font-bold text-yellow-600",children:R.toLocaleString()}),a.jsx("span",{className:"text-muted-foreground",children:"Coins"})]}),a.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Tukarkan coins yang kamu kumpulkan dengan berbagai item menarik untuk mempersonalisasi pengalaman belajarmu!"})]}),a.jsxs(P,{defaultValue:"avatars",className:"space-y-8",children:[a.jsxs(T,{className:"grid w-full grid-cols-3 max-w-2xl mx-auto",children:[a.jsxs(M,{value:"avatars",className:"flex items-center gap-2",children:[a.jsx("span",{children:"😊"})," Avatars"]}),a.jsxs(M,{value:"powerups",className:"flex items-center gap-2",children:[a.jsx(s,{className:"h-4 w-4"})," Power-ups"]}),a.jsxs(M,{value:"badges",className:"flex items-center gap-2",children:[a.jsx(i,{className:"h-4 w-4"})," Badges"]})]}),a.jsxs(W,{value:"avatars",className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Avatar Collection"}),a.jsx("p",{className:"text-muted-foreground",children:"Pilih avatar yang mencerminkan kepribadianmu"})]}),V(Z.avatars,"avatars")]}),a.jsxs(W,{value:"powerups",className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Power-ups"}),a.jsx("p",{className:"text-muted-foreground",children:"Tingkatkan performa belajarmu dengan power-ups"})]}),V(Z.powerups,"powerups")]}),a.jsxs(W,{value:"badges",className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Achievement Badges"}),a.jsx("p",{className:"text-muted-foreground",children:"Koleksi badge untuk menunjukkan pencapaianmu"})]}),V(Z.badges,"badges")]})]})]})]})};export{H as default};
//# sourceMappingURL=Shop-CaCgpHQJ.js.map
